import{_ as q,d as b,o as k,b as g,w as o,c as r,E as _,F as S,e as C,$ as y,r as m,M as T,a2 as D,h as I,D as B,y as V,j as c,t as j,a1 as w}from"./chunks/framework.CXbGQEsj.js";import{j as $,c as A,s as f}from"./chunks/jskos-tools.CpjLtWvA.js";import{I as P}from"./chunks/ItemList.DuHJvhoQ.js";import{A as x}from"./chunks/Arrow.CvIf42LG.js";import"./chunks/shared.l0sNRNKZ.js";import{c as L}from"./chunks/index.C1QD6wya.js";import"./chunks/ItemName.C-g5_niL.js";import"./chunks/utils.CCe5VO4G.js";import"./chunks/LoadingIndicator.CWAPJBMj.js";import"./chunks/vue-scrollto.FOkUA__D.js";const O=b({name:"ConceptTree",components:{ItemList:P,Arrow:x},props:{modelValue:{type:Object,default:null},concepts:{type:Array,required:!0},hierarchy:{type:Boolean,default:!0},itemListOptions:{type:Object,default:()=>({})}},emits:["select","open","close","update:modelValue"],setup(s,{emit:h}){const t=D({}),E=i=>{t[i.uri]=!0,h("open",i)},l=i=>{delete t[i.uri],h("close",i)},p=i=>{t[i.uri]?l(i):E(i)},n=i=>{let a=[],e=i.concept,v=i.depth+1;if(e&&t[e.uri])for(let F of e.narrower||[]){let u={concept:F,depth:v,isSelected:A(s.modelValue,F)};a.push(u),a=a.concat(n(u))}return a};return{items:I(()=>{let i=[];for(let a of s.concepts){let e={concept:a,depth:0,isSelected:A(s.modelValue,a)};i.push(e),s.hierarchy&&(i=i.concat(n(e)))}return i}),isOpen:t,open:E,close:l,toggle:p,jskos:$}},methods:{isUriInView(...s){return this.$refs.itemList.isUriInView(...s)},scrollToUri(...s){this.$refs.itemList.scrollToUri(...s)}}}),N=["onClick"];function U(s,h,t,E,l,p){var i;const n=B("arrow"),d=B("item-list");return k(),g(d,T({ref:"itemList"},s.itemListOptions,{class:{"jskos-vue-conceptTree":!0,"jskos-vue-conceptTree-noHierarchy":!s.hierarchy},items:s.items,"item-property":"concept","highlight-by-uri":(i=s.modelValue)!=null&&i.uri?{[s.modelValue.uri]:!0}:{},onSelect:h[0]||(h[0]=a=>{s.$emit("select",a),s.$emit("update:modelValue",a.item)})}),{beforeItem:o(({item:a})=>[(k(!0),r(S,null,_(a.depth,e=>(k(),r("div",{key:e,class:"jskos-vue-conceptTree-depthSpacer"}))),128)),s.hierarchy?(k(),r("div",{key:0,class:"jskos-vue-conceptTree-arrow",onClick:y(e=>s.toggle(a.concept),["stop"])},[a.concept&&a.concept.narrower&&a.concept.narrower.length!==0?(k(),g(n,{key:0,direction:s.isOpen[a.concept.uri]?"down":"right",clickable:!0},null,8,["direction"])):C("",!0)],8,N)):C("",!0),m(s.$slots,"beforeItem",{item:a.concept})]),afterItem:o(({item:a})=>[m(s.$slots,"afterItem",{item:a.concept})]),_:3},16,["class","items","highlight-by-uri"])}const M=q(O,[["render",U]]),R=w("",13),J=["onClick"],K=["onClick"],z={key:1},Y=w("",1),ls=JSON.parse('{"title":"ConceptTree","description":"","frontmatter":{},"headers":[],"relativePath":"components/ConceptTree.md","filePath":"components/ConceptTree.md"}'),H={name:"components/ConceptTree.md"},es=Object.assign(H,{setup(s){let h;const t=D({scheme:null,async loadScheme(){this.scheme=(await h.getSchemes({params:{uri:"https://www.ixtheo.de/classification/"}}))[0]},concepts:null,async loadConcepts(){this.concepts=f(await this.scheme._getTop())},async loadNarrower(l){l.narrower&&!l.narrower.includes(null)||(l.narrower=f(await l._getNarrower()))},selected:null});V(async()=>{h=L.initializeRegistry({provider:"ConceptApi",api:"https://coli-conc.gbv.de/api/"}),await t.loadScheme(),await t.loadConcepts()});const E=(...l)=>window.alert(...l);return(l,p)=>(k(),r("div",null,[R,c("p",null," Selected: "+j(t.selected&&t.selected.uri||"none"),1),t.concepts?(k(),g(M,{key:0,modelValue:t.selected,"onUpdate:modelValue":p[0]||(p[0]=n=>t.selected=n),style:{height:"400px",overflow:"auto",border:"2px solid #0001"},concepts:t.concepts,onOpen:p[1]||(p[1]=n=>t.loadNarrower(n))},{beforeItem:o(({item:n})=>[c("span",{class:"opacity-hover",style:{"margin-right":"5px"},onClick:y(d=>E(`Clicked on Star for item ${n.uri}`),["stop"])}," ⭐️ ",8,J)]),afterItem:o(({item:n})=>[c("div",{class:"opacity-hover",style:{position:"absolute",width:"20px",right:"2px",top:"50%",transform:"translateY(-50%)"},onClick:y(d=>E(`Clicked on Rocket for item ${n.uri}`),["stop"])}," 🚀 ",8,K)]),_:1},8,["modelValue","concepts"])):(k(),r("div",z," Loading concepts... ")),Y]))}});export{ls as __pageData,es as default};
