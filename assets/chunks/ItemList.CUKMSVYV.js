import{_ as I,d as b,o as d,c as f,F as $,E as h,n as k,P as w,$ as p,r as u,b as c,M as B,D as y}from"./framework.CXbGQEsj.js";import{I as v}from"./ItemName.C-g5_niL.js";import{L as T}from"./LoadingIndicator.CWAPJBMj.js";import{V as L}from"./vue-scrollto.FOkUA__D.js";import{b as O}from"./utils.CCe5VO4G.js";import"./shared.l0sNRNKZ.js";const{dragstart:C,dragend:M}=O,j=b({name:"ItemList",components:{ItemName:v,LoadingIndicator:T},props:{items:{type:Array,required:!0},itemProperty:{type:String,default:null},rowMode:{type:Boolean,default:!0},draggable:{type:Boolean,default:!0},indent:{type:Boolean,default:!1},itemNameOptions:{type:Object,default:()=>({})},indicatorByUri:{type:Object,default:()=>({})}},emits:["select"],data(){return{dragstart:C,dragend:M}},computed:{itemNameOptions_(){return Object.assign({draggable:this.draggable},this.itemNameOptions||{})}},methods:{styleForItem(e,s){let r={},o=this.indicatorByUri[e&&e.uri];return o||(o="transparent"),o!==!0&&(r["--jskos-vue-itemList-indicator-color"]=o),this.indent&&(r["padding-left"]=`${(s+1)*5}px`),r},getItem(e){return this.itemProperty?e[this.itemProperty]:e},isUriInView(e,s=60){const r=this.$el,o=r.querySelectorAll(`[data-uri='${e}']`)[0];if(!r||!o)return!1;let i=r.scrollTop,l=i+r.clientHeight,n=o.offsetTop-r.offsetTop,a=n+o.clientHeight,t=n>=i&&a<=l,m;return s===!0?m=n<i&&a>i||a>l&&n<l:typeof s=="number"&&(n<i&&a>i?m=(a-i)*100/o.clientHeight>s:a>l&&n<l&&(m=(l-n)*100/o.clientHeight>s)),!!(t||s&&m)},scrollToUri(e,s=!1){if(s&&this.isUriInView(e))return;const r=this.$el,o=r.querySelectorAll(`[data-uri='${e}']`)[0],i={container:r,easing:"ease-in",offset:-15,cancelable:!0,x:!1,y:!0};o&&L.scrollTo(o,200,i)}}}),N={class:"jskos-vue-itemList"},P=["data-uri","draggable","onDragstart","onClick"];function S(e,s,r,o,i,l){const n=y("item-name"),a=y("loading-indicator");return d(),f("div",N,[(d(!0),f($,null,h(e.items,(t,m)=>(d(),f("div",{key:e.getItem(t)&&e.getItem(t).uri,class:k({"jskos-vue-itemList-row":e.rowMode}),style:w(e.styleForItem(e.getItem(t),m)),"data-uri":e.getItem(t)&&e.getItem(t).uri,draggable:e.rowMode&&e.draggable&&!!e.getItem(t),onDragstart:g=>e.dragstart(e.getItem(t)),onDragend:s[0]||(s[0]=(...g)=>e.dragend&&e.dragend(...g)),onClick:p(g=>e.rowMode&&e.$emit("select",{item:e.getItem(t),row:!0}),["stop"])},[u(e.$slots,"beforeItem",{item:t}),e.getItem(t)?(d(),c(n,B({key:0,ref_for:!0},e.itemNameOptions_,{item:e.getItem(t),draggable:e.itemNameOptions_.draggable!==!1&&!e.rowMode,onClick:p(g=>e.$emit("select",{item:e.getItem(t),row:!1}),["stop"])}),null,16,["item","draggable","onClick"])):(d(),c(a,{key:1,style:{"align-self":"center"}})),u(e.$slots,"afterItem",{item:t})],46,P))),128))])}const q=I(j,[["render",S]]);export{q as I};
