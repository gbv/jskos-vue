import{_ as b,d as q,o as k,b as y,w as r,c as d,E as _,F as S,e as m,$ as F,r as c,M as T,a2 as D,h as I,D as B,y as V,j as g,t as L,a1 as w}from"./chunks/framework.CXbGQEsj.js";import{j as $,c as f,s as A}from"./chunks/jskos-tools.CpjLtWvA.js";import{I as j}from"./chunks/ItemList.dFFUTM6W.js";import{A as P}from"./chunks/Arrow.CvIf42LG.js";import"./chunks/shared.l0sNRNKZ.js";import{c as x}from"./chunks/index.C1QD6wya.js";import"./chunks/ItemName.C-g5_niL.js";import"./chunks/utils.CCe5VO4G.js";import"./chunks/LoadingIndicator.CWAPJBMj.js";import"./chunks/vue-scrollto.FOkUA__D.js";const O=q({name:"ConceptTree",components:{ItemList:j,Arrow:P},props:{modelValue:{type:Object,default:null},concepts:{type:Array,required:!0},hierarchy:{type:Boolean,default:!0},itemListOptions:{type:Object,default:()=>({})}},emits:["select","open","close","update:modelValue"],setup(s,{emit:h}){const t=D({}),E=i=>{t[i.uri]=!0,h("open",i)},l=i=>{delete t[i.uri],h("close",i)},p=i=>{t[i.uri]?l(i):E(i)},n=i=>{let a=[],e=i.concept,v=i.depth+1;if(e&&t[e.uri])for(let u of e.narrower||[]){let C={concept:u,depth:v,isSelected:f(s.modelValue,u)};a.push(C),a=a.concat(n(C))}return a};return{items:I(()=>{let i=[];for(let a of s.concepts){let e={concept:a,depth:0,isSelected:f(s.modelValue,a)};i.push(e),s.hierarchy&&(i=i.concat(n(e)))}return i}),isOpen:t,open:E,close:l,toggle:p,jskos:$}},methods:{isUriInView(...s){return this.$refs.itemList.isUriInView(...s)},scrollToUri(...s){this.$refs.itemList.scrollToUri(...s)}}}),N=["onClick"];function U(s,h,t,E,l,p){var i;const n=B("arrow"),o=B("item-list");return k(),y(o,T({ref:"itemList"},s.itemListOptions,{class:{"jskos-vue-conceptTree":!0,"jskos-vue-conceptTree-noHierarchy":!s.hierarchy},items:s.items,"item-property":"concept","highlight-by-uri":(i=s.modelValue)!=null&&i.uri?{[s.modelValue.uri]:!0}:{},onSelect:h[0]||(h[0]=a=>{s.$emit("select",a),s.$emit("update:modelValue",a.item)})}),{beforeItem:r(({item:a})=>[(k(!0),d(S,null,_(a.depth,e=>(k(),d("div",{key:e,class:"jskos-vue-conceptTree-depthSpacer"}))),128)),s.hierarchy?(k(),d("div",{key:0,class:"jskos-vue-conceptTree-arrow",onClick:F(e=>s.toggle(a.concept),["stop"])},[a.concept&&a.concept.narrower&&a.concept.narrower.length!==0?(k(),y(n,{key:0,direction:s.isOpen[a.concept.uri]?"down":"right",clickable:!0},null,8,["direction"])):m("",!0)],8,N)):m("",!0),c(s.$slots,"beforeItem",{item:a.concept})]),afterItem:r(({item:a})=>[c(s.$slots,"afterItem",{item:a.concept})]),beforeList:r(()=>[c(s.$slots,"beforeList")]),afterList:r(()=>[c(s.$slots,"afterList")]),_:3},16,["class","items","highlight-by-uri"])}const M=b(O,[["render",U]]),R=w("",13),J=["onClick"],K=["onClick"],z={key:1},Y=w("",1),ls=JSON.parse('{"title":"ConceptTree","description":"","frontmatter":{},"headers":[],"relativePath":"components/ConceptTree.md","filePath":"components/ConceptTree.md"}'),H={name:"components/ConceptTree.md"},es=Object.assign(H,{setup(s){let h;const t=D({scheme:null,async loadScheme(){this.scheme=(await h.getSchemes({params:{uri:"https://www.ixtheo.de/classification/"}}))[0]},concepts:null,async loadConcepts(){this.concepts=A(await this.scheme._getTop())},async loadNarrower(l){l.narrower&&!l.narrower.includes(null)||(l.narrower=A(await l._getNarrower()))},selected:null});V(async()=>{h=x.initializeRegistry({provider:"ConceptApi",api:"https://coli-conc.gbv.de/api/"}),await t.loadScheme(),await t.loadConcepts()});const E=(...l)=>window.alert(...l);return(l,p)=>(k(),d("div",null,[R,g("p",null," Selected: "+L(t.selected&&t.selected.uri||"none"),1),t.concepts?(k(),y(M,{key:0,modelValue:t.selected,"onUpdate:modelValue":p[0]||(p[0]=n=>t.selected=n),style:{height:"400px",overflow:"auto",border:"2px solid #0001"},concepts:t.concepts,onOpen:p[1]||(p[1]=n=>t.loadNarrower(n))},{beforeItem:r(({item:n})=>[g("span",{class:"opacity-hover",style:{"margin-right":"5px"},onClick:F(o=>E(`Clicked on Star for item ${n.uri}`),["stop"])}," ⭐️ ",8,J)]),afterItem:r(({item:n})=>[g("div",{class:"opacity-hover",style:{position:"absolute",width:"20px",right:"2px",top:"50%",transform:"translateY(-50%)"},onClick:F(o=>E(`Clicked on Rocket for item ${n.uri}`),["stop"])}," 🚀 ",8,K)]),_:1},8,["modelValue","concepts"])):(k(),d("div",z," Loading concepts... ")),Y]))}});export{ls as __pageData,es as default};
