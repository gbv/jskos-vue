import{_ as J,q as Q,P as U,o,c as g,ah as V,ak as G,j as B,X as v,Z as L,k as X,ai as Y,E as A,F as Z,B as ss,n as is,e as as,p as h,v as ts,ae as f}from"./chunks/framework.DrGHJ5PD.js";import{L as ns}from"./chunks/LoadingIndicator.Cnf7X1bS.js";import{V as es}from"./chunks/vue-scrollto.DDOJiwre.js";import{u as hs,b as ls,d as ks,c as M}from"./chunks/utils.DghZQ3te.js";/* empty css                      */import{c as j}from"./chunks/index.G1N0vPBN.js";const ps=["placeholder","onKeydown"],Es={class:"jskos-vue-itemSuggest-results jskos-vue-text-small"},rs={key:0,class:"jskos-vue-itemSuggest-loading"},ds=["onClick","onMouseover"],os=["innerHTML"],gs={key:0,class:"jskos-vue-itemSuggest-results-item"},us={__name:"ItemSuggest",props:{search:{type:Function,default:null},placeholder:{type:String,default:null}},emits:["select"],setup(F,{expose:m,emit:C}){const{t:b}=hs({en:{placeholder:"Type to search..."},de:{placeholder:"Tippen zum Suchen..."}});function c(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}const D=F,r=C,i=h(!1),l=h(!1),k=h(null),E=h(""),n=h(-1),p=h([]),q=h(!1),w=h(null),_=h(null),I=h(null),N=ks(async s=>{s=s.trim(),p.value=[],i.value=!0;const a=D.search(s);k.value=a.cancel;let e;try{e=(await a).slice(1).reduce((t,d)=>(t=d.map((y,u)=>(t[u]||[]).concat(y)),t),[])}catch(t){if(t.message==="canceled")return;console.error(t),e=[]}s===E.value.trim()&&(p.value=e,k.value=null,i.value=!1)},200);Q(E,s=>{n.value=-1,k.value!=null&&(k.value("There was a newer search query."),k.value=null),s===""?(i.value=!1,l.value=!1):(p.value=["Waiting for you to stop typing..."],i.value=!0,l.value=!0,N(s))});const R=()=>{l.value=E.value!==""},S=()=>{l.value=!1},x=s=>{S(),n.value=-1,r("select",{uri:p.value[s][2]}),document.activeElement!==document.body&&document.activeElement.blur()},O=s=>{if(!E.value.length)return s;const a=E.value,e=new RegExp(a,"ig");let t=e.exec(s),d=0,y="";for(;t;){let u=t.index;y+=c(s.slice(d,u))+"<span class='jskos-vue-text-bold'>"+c(s.slice(u,u+a.length))+"</span>",d=u+a.length,t=e.exec(s)}return y+=c(s.slice(d)),y},P=()=>{const s=I.value.childNodes[n.value+1];if(s){const a=s.parentElement.parentElement,e=s.getBoundingClientRect(),t=a.getBoundingClientRect();es.scrollTo(s,100,{container:a,easing:"ease-in",offset:e.bottom>t.bottom?-t.height+e.height:0,cancelable:!0,x:!1,y:!0,force:!1})}};ls(()=>[{elements:[w.value],handler:()=>{l.value=!1,n.value=-1}}]);function z(s){q.value||(n.value=s)}function $(){q.value=!1}function K(){q.value=!0,n.value>=p.value.length-1?n.value=0:n.value+=1,P()}function W(){q.value=!0,n.value<=0?n.value=p.value.length-1:n.value-=1,P()}function H(){let s;i.value||p.value.length===0||(n.value<0||n.value>=p.value.length?s=0:s=n.value,x(s))}return m({focus(){_.value.focus()},setQuery(s,a=!1){E.value=s,a?_.value.focus():U(()=>{S()})}}),(s,a)=>(o(),g("div",{ref_key:"itemSuggest",ref:w,class:"jskos-vue-itemSuggest",onMousemove:$},[V(B("input",{ref_key:"searchInput",ref:_,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value=e),type:"search",placeholder:F.placeholder===null?X(b)("placeholder"):F.placeholder,onClick:R,onKeydown:[v(L(K,["prevent"]),["down"]),v(L(W,["prevent"]),["up"])],onKeyup:[v(H,["enter"]),a[1]||(a[1]=v(e=>{s.$refs&&s.$refs.searchInput&&s.$refs.searchInput.blur(),S()},["esc"]))],onFocus:R},null,40,ps),[[G,E.value]]),V(B("div",Es,[i.value?(o(),g("div",rs,[A(ns,{size:"md"})])):(o(),g("ul",{key:1,ref_key:"resultList",ref:I,class:"jskos-vue-itemSuggest-results-list"},[(o(!0),g(Z,null,ss(p.value,(e,t)=>(o(),g("li",{key:t,class:is([{"jskos-vue-itemSuggest-selected":t===n.value},"jskos-vue-itemSuggest-results-item"]),onClick:d=>x(t),onMouseover:d=>z(t)},[B("span",{innerHTML:O(e[0])},null,8,os)],42,ds))),128)),p.value.length==0?(o(),g("li",gs,[...a[2]||(a[2]=[B("div",null,"No results",-1)])])):as("",!0)],512))],512),[[Y,l.value]])],544))}},T=J(us,[["__scopeId","data-v-3b2c074c"]]),vs=JSON.parse('{"title":"ItemSuggest","description":"","frontmatter":{},"headers":[],"relativePath":"components/ItemSuggest.md","filePath":"components/ItemSuggest.md"}'),cs={name:"components/ItemSuggest.md"},fs=Object.assign(cs,{setup(F){const m=h(null),C=h(null);ts(()=>{m.value=j.initializeRegistry({provider:"ConceptApi",api:"https://coli-conc.gbv.de/api/"}),C.value=j.initializeRegistry({provider:"ConceptApi",api:"https://bartoc.org/api/"})});const b={uri:"http://dewey.info/scheme/edition/e23/",license:[{uri:"http://creativecommons.org/licenses/by-nc-nd/3.0/"}]},c=[{id:1,name:"Bulbasaur"},{id:2,name:"Ivysaur"},{id:3,name:"Venusaur"},{id:4,name:"Charmander"},{id:5,name:"Charmeleon"},{id:6,name:"Charizard"},{id:7,name:"Squirtle"},{id:8,name:"Wartortle"},{id:9,name:"Blastoise"},{id:10,name:"Caterpie"},{id:11,name:"Metapod"},{id:12,name:"Butterfree"},{id:13,name:"Weedle"},{id:14,name:"Kakuna"},{id:15,name:"Beedrill"},{id:16,name:"Pidgey"},{id:17,name:"Pidgeotto"},{id:18,name:"Pidgeot"},{id:19,name:"Rattata"},{id:20,name:"Raticate"}],D=async r=>{r=r.toLowerCase();const i=c.filter(k=>k.name.toLowerCase().includes(r)),l=[r];return l[1]=i.map(k=>k.name),l[2]=i.map(()=>""),l[3]=i.map(k=>`pokemon:${k.id}`),l};return(r,i)=>(o(),g("div",null,[i[0]||(i[0]=f("",11)),A(T,{search:D}),i[1]||(i[1]=f("",3)),A(T,{search:M(m.value,{scheme:b})},null,8,["search"]),i[2]||(i[2]=f("",3)),A(T,{search:M(C.value,{voc:!0})},null,8,["search"]),i[3]||(i[3]=f("",1))]))}});export{vs as __pageData,fs as default};
