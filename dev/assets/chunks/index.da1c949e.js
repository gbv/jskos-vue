import{j as A}from"./utils.18cb2ff0.js";import{c as ie}from"./vue-scrollto.ec7616c3.js";class x extends Error{constructor({message:e="",relatedError:r=null,code:a=null}={}){!e&&r&&r.message&&(e=r.message),super(e),this.name=this.constructor.name,this.relatedError=r,this.code=a}}class wa extends x{constructor({method:e,message:r="",...a}){a.message=`Method not implemented: ${e} (${r})`,super(a)}}class g extends x{constructor({parameter:e,message:r="",...a}){a.message=`Invalid or missing parameter: ${e} (${r})`,super(a)}}class Aa extends x{}class Ta extends x{}class Sa extends x{}class Ca extends x{}class F extends x{}class Tt extends x{}var Ye={exports:{}},Cr=function(e,r){return function(){for(var n=new Array(arguments.length),s=0;s<n.length;s++)n[s]=arguments[s];return e.apply(r,n)}},Oa=Cr,L=Object.prototype.toString;function Ze(t){return Array.isArray(t)}function qe(t){return typeof t=="undefined"}function Pa(t){return t!==null&&!qe(t)&&t.constructor!==null&&!qe(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Or(t){return L.call(t)==="[object ArrayBuffer]"}function xa(t){return L.call(t)==="[object FormData]"}function ja(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Or(t.buffer),e}function Ea(t){return typeof t=="string"}function Ia(t){return typeof t=="number"}function Pr(t){return t!==null&&typeof t=="object"}function fe(t){if(L.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Ra(t){return L.call(t)==="[object Date]"}function Ma(t){return L.call(t)==="[object File]"}function Na(t){return L.call(t)==="[object Blob]"}function xr(t){return L.call(t)==="[object Function]"}function La(t){return Pr(t)&&xr(t.pipe)}function Ua(t){return L.call(t)==="[object URLSearchParams]"}function Fa(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Da(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Qe(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),Ze(t))for(var r=0,a=t.length;r<a;r++)e.call(null,t[r],r,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}function He(){var t={};function e(n,s){fe(t[s])&&fe(n)?t[s]=He(t[s],n):fe(n)?t[s]=He({},n):Ze(n)?t[s]=n.slice():t[s]=n}for(var r=0,a=arguments.length;r<a;r++)Qe(arguments[r],e);return t}function Ba(t,e,r){return Qe(e,function(n,s){r&&typeof n=="function"?t[s]=Oa(n,r):t[s]=n}),t}function ka(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var C={isArray:Ze,isArrayBuffer:Or,isBuffer:Pa,isFormData:xa,isArrayBufferView:ja,isString:Ea,isNumber:Ia,isObject:Pr,isPlainObject:fe,isUndefined:qe,isDate:Ra,isFile:Ma,isBlob:Na,isFunction:xr,isStream:La,isURLSearchParams:Ua,isStandardBrowserEnv:Da,forEach:Qe,merge:He,extend:Ba,trim:Fa,stripBOM:ka},G=C;function St(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var jr=function(e,r,a){if(!r)return e;var n;if(a)n=a(r);else if(G.isURLSearchParams(r))n=r.toString();else{var s=[];G.forEach(r,function(u,l){u===null||typeof u=="undefined"||(G.isArray(u)?l=l+"[]":u=[u],G.forEach(u,function(f){G.isDate(f)?f=f.toISOString():G.isObject(f)&&(f=JSON.stringify(f)),s.push(St(l)+"="+St(f))}))}),n=s.join("&")}if(n){var i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+n}return e},qa=C;function _e(){this.handlers=[]}_e.prototype.use=function(e,r,a){return this.handlers.push({fulfilled:e,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};_e.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};_e.prototype.forEach=function(e){qa.forEach(this.handlers,function(a){a!==null&&e(a)})};var Ha=_e,Ga=C,Ka=function(e,r){Ga.forEach(e,function(n,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=n,delete e[s])})},Er=function(e,r,a,n,s){return e.config=r,a&&(e.code=a),e.request=n,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Ir={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},za=Er,Rr=function(e,r,a,n,s){var i=new Error(e);return za(i,r,a,n,s)},Wa=Rr,Ja=function(e,r,a){var n=a.config.validateStatus;!a.status||!n||n(a.status)?e(a):r(Wa("Request failed with status code "+a.status,a.config,null,a.request,a))},oe=C,Va=oe.isStandardBrowserEnv()?function(){return{write:function(r,a,n,s,i,o){var u=[];u.push(r+"="+encodeURIComponent(a)),oe.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),oe.isString(s)&&u.push("path="+s),oe.isString(i)&&u.push("domain="+i),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){var a=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Xa=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},Ya=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},Za=Xa,Qa=Ya,en=function(e,r){return e&&!Za(r)?Qa(e,r):r},Ie=C,tn=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],rn=function(e){var r={},a,n,s;return e&&Ie.forEach(e.split(`
`),function(o){if(s=o.indexOf(":"),a=Ie.trim(o.substr(0,s)).toLowerCase(),n=Ie.trim(o.substr(s+1)),a){if(r[a]&&tn.indexOf(a)>=0)return;a==="set-cookie"?r[a]=(r[a]?r[a]:[]).concat([n]):r[a]=r[a]?r[a]+", "+n:n}}),r},Ct=C,an=Ct.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),a;function n(s){var i=s;return e&&(r.setAttribute("href",i),i=r.href),r.setAttribute("href",i),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return a=n(window.location.href),function(i){var o=Ct.isString(i)?n(i):i;return o.protocol===a.protocol&&o.host===a.host}}():function(){return function(){return!0}}();function et(t){this.message=t}et.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};et.prototype.__CANCEL__=!0;var me=et,ue=C,nn=Ja,sn=Va,on=jr,un=en,cn=rn,fn=an,Re=Rr,ln=Ir,hn=me,Ot=function(e){return new Promise(function(a,n){var s=e.data,i=e.headers,o=e.responseType,u;function l(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}ue.isFormData(s)&&delete i["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",h=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.Authorization="Basic "+btoa(f+":"+h)}var p=un(e.baseURL,e.url);c.open(e.method.toUpperCase(),on(p,e.params,e.paramsSerializer),!0),c.timeout=e.timeout;function _(){if(!!c){var d="getAllResponseHeaders"in c?cn(c.getAllResponseHeaders()):null,$=!o||o==="text"||o==="json"?c.responseText:c.response,T={data:$,status:c.status,statusText:c.statusText,headers:d,config:e,request:c};nn(function(v){a(v),l()},function(v){n(v),l()},T),c=null}}if("onloadend"in c?c.onloadend=_:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(_)},c.onabort=function(){!c||(n(Re("Request aborted",e,"ECONNABORTED",c)),c=null)},c.onerror=function(){n(Re("Network Error",e,null,c)),c=null},c.ontimeout=function(){var $=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",T=e.transitional||ln;e.timeoutErrorMessage&&($=e.timeoutErrorMessage),n(Re($,e,T.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",c)),c=null},ue.isStandardBrowserEnv()){var w=(e.withCredentials||fn(p))&&e.xsrfCookieName?sn.read(e.xsrfCookieName):void 0;w&&(i[e.xsrfHeaderName]=w)}"setRequestHeader"in c&&ue.forEach(i,function($,T){typeof s=="undefined"&&T.toLowerCase()==="content-type"?delete i[T]:c.setRequestHeader(T,$)}),ue.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),o&&o!=="json"&&(c.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&c.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(u=function(d){!c||(n(!d||d&&d.type?new hn("canceled"):d),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u))),s||(s=null),c.send(s)})},S=C,Pt=Ka,pn=Er,dn=Ir,gn={"Content-Type":"application/x-www-form-urlencoded"};function xt(t,e){!S.isUndefined(t)&&S.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function vn(){var t;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Ot),t}function yn(t,e,r){if(S.isString(t))try{return(e||JSON.parse)(t),S.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}var $e={transitional:dn,adapter:vn(),transformRequest:[function(e,r){return Pt(r,"Accept"),Pt(r,"Content-Type"),S.isFormData(e)||S.isArrayBuffer(e)||S.isBuffer(e)||S.isStream(e)||S.isFile(e)||S.isBlob(e)?e:S.isArrayBufferView(e)?e.buffer:S.isURLSearchParams(e)?(xt(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):S.isObject(e)||r&&r["Content-Type"]==="application/json"?(xt(r,"application/json"),yn(e)):e}],transformResponse:[function(e){var r=this.transitional||$e.transitional,a=r&&r.silentJSONParsing,n=r&&r.forcedJSONParsing,s=!a&&this.responseType==="json";if(s||n&&S.isString(e)&&e.length)try{return JSON.parse(e)}catch(i){if(s)throw i.name==="SyntaxError"?pn(i,this,"E_JSON_PARSE"):i}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};S.forEach(["delete","get","head"],function(e){$e.headers[e]={}});S.forEach(["post","put","patch"],function(e){$e.headers[e]=S.merge(gn)});var tt=$e,_n=C,mn=tt,$n=function(e,r,a){var n=this||mn;return _n.forEach(a,function(i){e=i.call(n,e,r)}),e},Mr=function(e){return!!(e&&e.__CANCEL__)},jt=C,Me=$n,bn=Mr,wn=tt,An=me;function Ne(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new An("canceled")}var Tn=function(e){Ne(e),e.headers=e.headers||{},e.data=Me.call(e,e.data,e.headers,e.transformRequest),e.headers=jt.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),jt.forEach(["delete","get","head","post","put","patch","common"],function(n){delete e.headers[n]});var r=e.adapter||wn.adapter;return r(e).then(function(n){return Ne(e),n.data=Me.call(e,n.data,n.headers,e.transformResponse),n},function(n){return bn(n)||(Ne(e),n&&n.response&&(n.response.data=Me.call(e,n.response.data,n.response.headers,e.transformResponse))),Promise.reject(n)})},O=C,Nr=function(e,r){r=r||{};var a={};function n(c,f){return O.isPlainObject(c)&&O.isPlainObject(f)?O.merge(c,f):O.isPlainObject(f)?O.merge({},f):O.isArray(f)?f.slice():f}function s(c){if(O.isUndefined(r[c])){if(!O.isUndefined(e[c]))return n(void 0,e[c])}else return n(e[c],r[c])}function i(c){if(!O.isUndefined(r[c]))return n(void 0,r[c])}function o(c){if(O.isUndefined(r[c])){if(!O.isUndefined(e[c]))return n(void 0,e[c])}else return n(void 0,r[c])}function u(c){if(c in r)return n(e[c],r[c]);if(c in e)return n(void 0,e[c])}var l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u};return O.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var h=l[f]||s,p=h(f);O.isUndefined(p)&&h!==u||(a[f]=p)}),a},Lr={version:"0.26.1"},Sn=Lr.version,rt={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){rt[t]=function(a){return typeof a===t||"a"+(e<1?"n ":" ")+t}});var Et={};rt.transitional=function(e,r,a){function n(s,i){return"[Axios v"+Sn+"] Transitional option '"+s+"'"+i+(a?". "+a:"")}return function(s,i,o){if(e===!1)throw new Error(n(i," has been removed"+(r?" in "+r:"")));return r&&!Et[i]&&(Et[i]=!0,console.warn(n(i," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,i,o):!0}};function Cn(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var a=Object.keys(t),n=a.length;n-- >0;){var s=a[n],i=e[s];if(i){var o=t[s],u=o===void 0||i(o,s,t);if(u!==!0)throw new TypeError("option "+s+" must be "+u);continue}if(r!==!0)throw Error("Unknown option "+s)}}var On={assertOptions:Cn,validators:rt},Ur=C,Pn=jr,It=Ha,Rt=Tn,be=Nr,Fr=On,K=Fr.validators;function ae(t){this.defaults=t,this.interceptors={request:new It,response:new It}}ae.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=be(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var a=r.transitional;a!==void 0&&Fr.assertOptions(a,{silentJSONParsing:K.transitional(K.boolean),forcedJSONParsing:K.transitional(K.boolean),clarifyTimeoutError:K.transitional(K.boolean)},!1);var n=[],s=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(s=s&&p.synchronous,n.unshift(p.fulfilled,p.rejected))});var i=[];this.interceptors.response.forEach(function(p){i.push(p.fulfilled,p.rejected)});var o;if(!s){var u=[Rt,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(i),o=Promise.resolve(r);u.length;)o=o.then(u.shift(),u.shift());return o}for(var l=r;n.length;){var c=n.shift(),f=n.shift();try{l=c(l)}catch(h){f(h);break}}try{o=Rt(l)}catch(h){return Promise.reject(h)}for(;i.length;)o=o.then(i.shift(),i.shift());return o};ae.prototype.getUri=function(e){return e=be(this.defaults,e),Pn(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Ur.forEach(["delete","get","head","options"],function(e){ae.prototype[e]=function(r,a){return this.request(be(a||{},{method:e,url:r,data:(a||{}).data}))}});Ur.forEach(["post","put","patch"],function(e){ae.prototype[e]=function(r,a,n){return this.request(be(n||{},{method:e,url:r,data:a}))}});var xn=ae,jn=me;function z(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(n){e=n});var r=this;this.promise.then(function(a){if(!!r._listeners){var n,s=r._listeners.length;for(n=0;n<s;n++)r._listeners[n](a);r._listeners=null}}),this.promise.then=function(a){var n,s=new Promise(function(i){r.subscribe(i),n=i}).then(a);return s.cancel=function(){r.unsubscribe(n)},s},t(function(n){r.reason||(r.reason=new jn(n),e(r.reason))})}z.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};z.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};z.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};z.source=function(){var e,r=new z(function(n){e=n});return{token:r,cancel:e}};var En=z,In=function(e){return function(a){return e.apply(null,a)}},Rn=C,Mn=function(e){return Rn.isObject(e)&&e.isAxiosError===!0},Mt=C,Nn=Cr,le=xn,Ln=Nr,Un=tt;function Dr(t){var e=new le(t),r=Nn(le.prototype.request,e);return Mt.extend(r,le.prototype,e),Mt.extend(r,e),r.create=function(n){return Dr(Ln(t,n))},r}var j=Dr(Un);j.Axios=le;j.Cancel=me;j.CancelToken=En;j.isCancel=Mr;j.VERSION=Lr.version;j.all=function(e){return Promise.all(e)};j.spread=In;j.isAxiosError=Mn;Ye.exports=j;Ye.exports.default=j;var he=Ye.exports,Fn=Array.isArray,P=Fn,Dn=typeof ie=="object"&&ie&&ie.Object===Object&&ie,Br=Dn,Bn=Br,kn=typeof self=="object"&&self&&self.Object===Object&&self,qn=Bn||kn||Function("return this")(),E=qn,Hn=E,Gn=Hn.Symbol,J=Gn,Nt=J,kr=Object.prototype,Kn=kr.hasOwnProperty,zn=kr.toString,ee=Nt?Nt.toStringTag:void 0;function Wn(t){var e=Kn.call(t,ee),r=t[ee];try{t[ee]=void 0;var a=!0}catch{}var n=zn.call(t);return a&&(e?t[ee]=r:delete t[ee]),n}var Jn=Wn,Vn=Object.prototype,Xn=Vn.toString;function Yn(t){return Xn.call(t)}var Zn=Yn,Lt=J,Qn=Jn,es=Zn,ts="[object Null]",rs="[object Undefined]",Ut=Lt?Lt.toStringTag:void 0;function as(t){return t==null?t===void 0?rs:ts:Ut&&Ut in Object(t)?Qn(t):es(t)}var k=as;function ns(t){return t!=null&&typeof t=="object"}var I=ns,ss=k,is=I,os="[object Symbol]";function us(t){return typeof t=="symbol"||is(t)&&ss(t)==os}var at=us,cs=P,fs=at,ls=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hs=/^\w*$/;function ps(t,e){if(cs(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||fs(t)?!0:hs.test(t)||!ls.test(t)||e!=null&&t in Object(e)}var ds=ps;function gs(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var M=gs,vs=k,ys=M,_s="[object AsyncFunction]",ms="[object Function]",$s="[object GeneratorFunction]",bs="[object Proxy]";function ws(t){if(!ys(t))return!1;var e=vs(t);return e==ms||e==$s||e==_s||e==bs}var qr=ws,As=E,Ts=As["__core-js_shared__"],Ss=Ts,Le=Ss,Ft=function(){var t=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Cs(t){return!!Ft&&Ft in t}var Os=Cs,Ps=Function.prototype,xs=Ps.toString;function js(t){if(t!=null){try{return xs.call(t)}catch{}try{return t+""}catch{}}return""}var Hr=js,Es=qr,Is=Os,Rs=M,Ms=Hr,Ns=/[\\^$.*+?()[\]{}|]/g,Ls=/^\[object .+?Constructor\]$/,Us=Function.prototype,Fs=Object.prototype,Ds=Us.toString,Bs=Fs.hasOwnProperty,ks=RegExp("^"+Ds.call(Bs).replace(Ns,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qs(t){if(!Rs(t)||Is(t))return!1;var e=Es(t)?ks:Ls;return e.test(Ms(t))}var Hs=qs;function Gs(t,e){return t==null?void 0:t[e]}var Ks=Gs,zs=Hs,Ws=Ks;function Js(t,e){var r=Ws(t,e);return zs(r)?r:void 0}var q=Js,Vs=q,Xs=Vs(Object,"create"),we=Xs,Dt=we;function Ys(){this.__data__=Dt?Dt(null):{},this.size=0}var Zs=Ys;function Qs(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ei=Qs,ti=we,ri="__lodash_hash_undefined__",ai=Object.prototype,ni=ai.hasOwnProperty;function si(t){var e=this.__data__;if(ti){var r=e[t];return r===ri?void 0:r}return ni.call(e,t)?e[t]:void 0}var ii=si,oi=we,ui=Object.prototype,ci=ui.hasOwnProperty;function fi(t){var e=this.__data__;return oi?e[t]!==void 0:ci.call(e,t)}var li=fi,hi=we,pi="__lodash_hash_undefined__";function di(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=hi&&e===void 0?pi:e,this}var gi=di,vi=Zs,yi=ei,_i=ii,mi=li,$i=gi;function V(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}V.prototype.clear=vi;V.prototype.delete=yi;V.prototype.get=_i;V.prototype.has=mi;V.prototype.set=$i;var bi=V;function wi(){this.__data__=[],this.size=0}var Ai=wi;function Ti(t,e){return t===e||t!==t&&e!==e}var nt=Ti,Si=nt;function Ci(t,e){for(var r=t.length;r--;)if(Si(t[r][0],e))return r;return-1}var Ae=Ci,Oi=Ae,Pi=Array.prototype,xi=Pi.splice;function ji(t){var e=this.__data__,r=Oi(e,t);if(r<0)return!1;var a=e.length-1;return r==a?e.pop():xi.call(e,r,1),--this.size,!0}var Ei=ji,Ii=Ae;function Ri(t){var e=this.__data__,r=Ii(e,t);return r<0?void 0:e[r][1]}var Mi=Ri,Ni=Ae;function Li(t){return Ni(this.__data__,t)>-1}var Ui=Li,Fi=Ae;function Di(t,e){var r=this.__data__,a=Fi(r,t);return a<0?(++this.size,r.push([t,e])):r[a][1]=e,this}var Bi=Di,ki=Ai,qi=Ei,Hi=Mi,Gi=Ui,Ki=Bi;function X(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}X.prototype.clear=ki;X.prototype.delete=qi;X.prototype.get=Hi;X.prototype.has=Gi;X.prototype.set=Ki;var Te=X,zi=q,Wi=E,Ji=zi(Wi,"Map"),st=Ji,Bt=bi,Vi=Te,Xi=st;function Yi(){this.size=0,this.__data__={hash:new Bt,map:new(Xi||Vi),string:new Bt}}var Zi=Yi;function Qi(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var eo=Qi,to=eo;function ro(t,e){var r=t.__data__;return to(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Se=ro,ao=Se;function no(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e}var so=no,io=Se;function oo(t){return io(this,t).get(t)}var uo=oo,co=Se;function fo(t){return co(this,t).has(t)}var lo=fo,ho=Se;function po(t,e){var r=ho(this,t),a=r.size;return r.set(t,e),this.size+=r.size==a?0:1,this}var go=po,vo=Zi,yo=so,_o=uo,mo=lo,$o=go;function Y(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}Y.prototype.clear=vo;Y.prototype.delete=yo;Y.prototype.get=_o;Y.prototype.has=mo;Y.prototype.set=$o;var it=Y,Gr=it,bo="Expected a function";function ot(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(bo);var r=function(){var a=arguments,n=e?e.apply(this,a):a[0],s=r.cache;if(s.has(n))return s.get(n);var i=t.apply(this,a);return r.cache=s.set(n,i)||s,i};return r.cache=new(ot.Cache||Gr),r}ot.Cache=Gr;var wo=ot,Ao=wo,To=500;function So(t){var e=Ao(t,function(a){return r.size===To&&r.clear(),a}),r=e.cache;return e}var Co=So,Oo=Co,Po=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xo=/\\(\\)?/g,jo=Oo(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Po,function(r,a,n,s){e.push(n?s.replace(xo,"$1"):a||r)}),e}),Eo=jo;function Io(t,e){for(var r=-1,a=t==null?0:t.length,n=Array(a);++r<a;)n[r]=e(t[r],r,t);return n}var Ce=Io,kt=J,Ro=Ce,Mo=P,No=at,Lo=1/0,qt=kt?kt.prototype:void 0,Ht=qt?qt.toString:void 0;function Kr(t){if(typeof t=="string")return t;if(Mo(t))return Ro(t,Kr)+"";if(No(t))return Ht?Ht.call(t):"";var e=t+"";return e=="0"&&1/t==-Lo?"-0":e}var Uo=Kr,Fo=Uo;function Do(t){return t==null?"":Fo(t)}var Bo=Do,ko=P,qo=ds,Ho=Eo,Go=Bo;function Ko(t,e){return ko(t)?t:qo(t,e)?[t]:Ho(Go(t))}var Oe=Ko,zo=at,Wo=1/0;function Jo(t){if(typeof t=="string"||zo(t))return t;var e=t+"";return e=="0"&&1/t==-Wo?"-0":e}var ut=Jo,Vo=Oe,Xo=ut;function Yo(t,e){e=Vo(e,t);for(var r=0,a=e.length;t!=null&&r<a;)t=t[Xo(e[r++])];return r&&r==a?t:void 0}var zr=Yo,Zo=zr;function Qo(t,e,r){var a=t==null?void 0:Zo(t,e);return a===void 0?r:a}var eu=Qo,y=eu,tu=q,ru=function(){try{var t=tu(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Wr=ru,Gt=Wr;function au(t,e,r){e=="__proto__"&&Gt?Gt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Jr=au,nu=Jr,su=nt,iu=Object.prototype,ou=iu.hasOwnProperty;function uu(t,e,r){var a=t[e];(!(ou.call(t,e)&&su(a,r))||r===void 0&&!(e in t))&&nu(t,e,r)}var ct=uu,cu=9007199254740991,fu=/^(?:0|[1-9]\d*)$/;function lu(t,e){var r=typeof t;return e=e==null?cu:e,!!e&&(r=="number"||r!="symbol"&&fu.test(t))&&t>-1&&t%1==0&&t<e}var Vr=lu,hu=ct,pu=Oe,du=Vr,Kt=M,gu=ut;function vu(t,e,r,a){if(!Kt(t))return t;e=pu(e,t);for(var n=-1,s=e.length,i=s-1,o=t;o!=null&&++n<s;){var u=gu(e[n]),l=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(n!=i){var c=o[u];l=a?a(c,u,o):void 0,l===void 0&&(l=Kt(c)?c:du(e[n+1])?[]:{})}hu(o,u,l),o=o[u]}return t}var yu=vu,_u=yu;function mu(t,e,r){return t==null?t:_u(t,e,r)}var $u=mu,ge=$u,bu="__lodash_hash_undefined__";function wu(t){return this.__data__.set(t,bu),this}var Au=wu;function Tu(t){return this.__data__.has(t)}var Su=Tu,Cu=it,Ou=Au,Pu=Su;function ve(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Cu;++e<r;)this.add(t[e])}ve.prototype.add=ve.prototype.push=Ou;ve.prototype.has=Pu;var ft=ve;function xu(t,e,r,a){for(var n=t.length,s=r+(a?1:-1);a?s--:++s<n;)if(e(t[s],s,t))return s;return-1}var ju=xu;function Eu(t){return t!==t}var Iu=Eu;function Ru(t,e,r){for(var a=r-1,n=t.length;++a<n;)if(t[a]===e)return a;return-1}var Mu=Ru,Nu=ju,Lu=Iu,Uu=Mu;function Fu(t,e,r){return e===e?Uu(t,e,r):Nu(t,Lu,r)}var Du=Fu,Bu=Du;function ku(t,e){var r=t==null?0:t.length;return!!r&&Bu(t,e,0)>-1}var Xr=ku;function qu(t,e,r){for(var a=-1,n=t==null?0:t.length;++a<n;)if(r(e,t[a]))return!0;return!1}var Yr=qu;function Hu(t,e){return t.has(e)}var lt=Hu,Gu=q,Ku=E,zu=Gu(Ku,"Set"),Zr=zu;function Wu(){}var Ju=Wu;function Vu(t){var e=-1,r=Array(t.size);return t.forEach(function(a){r[++e]=a}),r}var ht=Vu,Ue=Zr,Xu=Ju,Yu=ht,Zu=1/0,Qu=Ue&&1/Yu(new Ue([,-0]))[1]==Zu?function(t){return new Ue(t)}:Xu,ec=Qu,tc=ft,rc=Xr,ac=Yr,nc=lt,sc=ec,ic=ht,oc=200;function uc(t,e,r){var a=-1,n=rc,s=t.length,i=!0,o=[],u=o;if(r)i=!1,n=ac;else if(s>=oc){var l=e?null:sc(t);if(l)return ic(l);i=!1,n=nc,u=new tc}else u=e?[]:o;e:for(;++a<s;){var c=t[a],f=e?e(c):c;if(c=r||c!==0?c:0,i&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;e&&u.push(f),o.push(c)}else n(u,f,r)||(u!==o&&u.push(f),o.push(c))}return o}var cc=uc,fc=cc;function lc(t){return t&&t.length?fc(t):[]}var hc=lc,pc=hc;function dc(t){return function(e){return t(e)}}var Pe=dc,gc=ft,vc=Xr,yc=Yr,_c=Ce,mc=Pe,zt=lt,$c=Math.min;function bc(t,e,r){for(var a=r?yc:vc,n=t[0].length,s=t.length,i=s,o=Array(s),u=1/0,l=[];i--;){var c=t[i];i&&e&&(c=_c(c,mc(e))),u=$c(c.length,u),o[i]=!r&&(e||n>=120&&c.length>=120)?new gc(i&&c):void 0}c=t[0];var f=-1,h=o[0];e:for(;++f<n&&l.length<u;){var p=c[f],_=e?e(p):p;if(p=r||p!==0?p:0,!(h?zt(h,_):a(l,_,r))){for(i=s;--i;){var w=o[i];if(!(w?zt(w,_):a(t[i],_,r)))continue e}h&&h.push(_),l.push(p)}}return l}var wc=bc;function Ac(t){return t}var pt=Ac;function Tc(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Sc=Tc,Cc=Sc,Wt=Math.max;function Oc(t,e,r){return e=Wt(e===void 0?t.length-1:e,0),function(){for(var a=arguments,n=-1,s=Wt(a.length-e,0),i=Array(s);++n<s;)i[n]=a[e+n];n=-1;for(var o=Array(e+1);++n<e;)o[n]=a[n];return o[e]=r(i),Cc(t,this,o)}}var Qr=Oc;function Pc(t){return function(){return t}}var xc=Pc,jc=xc,Jt=Wr,Ec=pt,Ic=Jt?function(t,e){return Jt(t,"toString",{configurable:!0,enumerable:!1,value:jc(e),writable:!0})}:Ec,Rc=Ic,Mc=800,Nc=16,Lc=Date.now;function Uc(t){var e=0,r=0;return function(){var a=Lc(),n=Nc-(a-r);if(r=a,n>0){if(++e>=Mc)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Fc=Uc,Dc=Rc,Bc=Fc,kc=Bc(Dc),ea=kc,qc=pt,Hc=Qr,Gc=ea;function Kc(t,e){return Gc(Hc(t,e,qc),t+"")}var zc=Kc,Wc=9007199254740991;function Jc(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Wc}var ta=Jc,Vc=qr,Xc=ta;function Yc(t){return t!=null&&Xc(t.length)&&!Vc(t)}var xe=Yc,Zc=xe,Qc=I;function ef(t){return Qc(t)&&Zc(t)}var tf=ef,rf=tf;function af(t){return rf(t)?t:[]}var nf=af,sf=Ce,of=wc,uf=zc,cf=nf,ff=uf(function(t){var e=sf(t,cf);return e.length&&e[0]===t[0]?of(e):[]}),lf=ff,Fe=lf;function hf(t,e){for(var r=-1,a=e.length,n=t.length;++r<a;)t[n+r]=e[r];return t}var dt=hf,pf=k,df=I,gf="[object Arguments]";function vf(t){return df(t)&&pf(t)==gf}var yf=vf,Vt=yf,_f=I,ra=Object.prototype,mf=ra.hasOwnProperty,$f=ra.propertyIsEnumerable,bf=Vt(function(){return arguments}())?Vt:function(t){return _f(t)&&mf.call(t,"callee")&&!$f.call(t,"callee")},gt=bf,Xt=J,wf=gt,Af=P,Yt=Xt?Xt.isConcatSpreadable:void 0;function Tf(t){return Af(t)||wf(t)||!!(Yt&&t&&t[Yt])}var Sf=Tf,Cf=dt,Of=Sf;function aa(t,e,r,a,n){var s=-1,i=t.length;for(r||(r=Of),n||(n=[]);++s<i;){var o=t[s];e>0&&r(o)?e>1?aa(o,e-1,r,a,n):Cf(n,o):a||(n[n.length]=o)}return n}var Pf=aa;function xf(t){return function(e,r,a){for(var n=-1,s=Object(e),i=a(e),o=i.length;o--;){var u=i[t?o:++n];if(r(s[u],u,s)===!1)break}return e}}var jf=xf,Ef=jf,If=Ef(),Rf=If;function Mf(t,e){for(var r=-1,a=Array(t);++r<t;)a[r]=e(r);return a}var Nf=Mf,W={exports:{}};function Lf(){return!1}var Uf=Lf;(function(t,e){var r=E,a=Uf,n=e&&!e.nodeType&&e,s=n&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===n,o=i?r.Buffer:void 0,u=o?o.isBuffer:void 0,l=u||a;t.exports=l})(W,W.exports);var Ff=k,Df=ta,Bf=I,kf="[object Arguments]",qf="[object Array]",Hf="[object Boolean]",Gf="[object Date]",Kf="[object Error]",zf="[object Function]",Wf="[object Map]",Jf="[object Number]",Vf="[object Object]",Xf="[object RegExp]",Yf="[object Set]",Zf="[object String]",Qf="[object WeakMap]",el="[object ArrayBuffer]",tl="[object DataView]",rl="[object Float32Array]",al="[object Float64Array]",nl="[object Int8Array]",sl="[object Int16Array]",il="[object Int32Array]",ol="[object Uint8Array]",ul="[object Uint8ClampedArray]",cl="[object Uint16Array]",fl="[object Uint32Array]",b={};b[rl]=b[al]=b[nl]=b[sl]=b[il]=b[ol]=b[ul]=b[cl]=b[fl]=!0;b[kf]=b[qf]=b[el]=b[Hf]=b[tl]=b[Gf]=b[Kf]=b[zf]=b[Wf]=b[Jf]=b[Vf]=b[Xf]=b[Yf]=b[Zf]=b[Qf]=!1;function ll(t){return Bf(t)&&Df(t.length)&&!!b[Ff(t)]}var hl=ll,te={exports:{}};(function(t,e){var r=Br,a=e&&!e.nodeType&&e,n=a&&!0&&t&&!t.nodeType&&t,s=n&&n.exports===a,i=s&&r.process,o=function(){try{var u=n&&n.require&&n.require("util").types;return u||i&&i.binding&&i.binding("util")}catch{}}();t.exports=o})(te,te.exports);var pl=hl,dl=Pe,Zt=te.exports,Qt=Zt&&Zt.isTypedArray,gl=Qt?dl(Qt):pl,vt=gl,vl=Nf,yl=gt,_l=P,ml=W.exports,$l=Vr,bl=vt,wl=Object.prototype,Al=wl.hasOwnProperty;function Tl(t,e){var r=_l(t),a=!r&&yl(t),n=!r&&!a&&ml(t),s=!r&&!a&&!n&&bl(t),i=r||a||n||s,o=i?vl(t.length,String):[],u=o.length;for(var l in t)(e||Al.call(t,l))&&!(i&&(l=="length"||n&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||$l(l,u)))&&o.push(l);return o}var na=Tl,Sl=Object.prototype;function Cl(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Sl;return t===r}var je=Cl;function Ol(t,e){return function(r){return t(e(r))}}var sa=Ol,Pl=sa,xl=Pl(Object.keys,Object),jl=xl,El=je,Il=jl,Rl=Object.prototype,Ml=Rl.hasOwnProperty;function Nl(t){if(!El(t))return Il(t);var e=[];for(var r in Object(t))Ml.call(t,r)&&r!="constructor"&&e.push(r);return e}var ia=Nl,Ll=na,Ul=ia,Fl=xe;function Dl(t){return Fl(t)?Ll(t):Ul(t)}var Ee=Dl,Bl=Rf,kl=Ee;function ql(t,e){return t&&Bl(t,e,kl)}var Hl=ql,Gl=pt;function Kl(t){return typeof t=="function"?t:Gl}var zl=Kl,Wl=Hl,Jl=zl;function Vl(t,e){return t&&Wl(t,Jl(e))}var Xl=Vl,Yl=Xl,Zl=k,Ql=P,eh=I,th="[object String]";function rh(t){return typeof t=="string"||!Ql(t)&&eh(t)&&Zl(t)==th}var ah=rh,N=ah,nh=q,sh=E,ih=nh(sh,"DataView"),oh=ih,uh=q,ch=E,fh=uh(ch,"Promise"),lh=fh,hh=q,ph=E,dh=hh(ph,"WeakMap"),gh=dh,Ge=oh,Ke=st,ze=lh,We=Zr,Je=gh,oa=k,Z=Hr,er="[object Map]",vh="[object Object]",tr="[object Promise]",rr="[object Set]",ar="[object WeakMap]",nr="[object DataView]",yh=Z(Ge),_h=Z(Ke),mh=Z(ze),$h=Z(We),bh=Z(Je),D=oa;(Ge&&D(new Ge(new ArrayBuffer(1)))!=nr||Ke&&D(new Ke)!=er||ze&&D(ze.resolve())!=tr||We&&D(new We)!=rr||Je&&D(new Je)!=ar)&&(D=function(t){var e=oa(t),r=e==vh?t.constructor:void 0,a=r?Z(r):"";if(a)switch(a){case yh:return nr;case _h:return er;case mh:return tr;case $h:return rr;case bh:return ar}return e});var ne=D,wh=ia,Ah=ne,Th=gt,Sh=P,Ch=xe,Oh=W.exports,Ph=je,xh=vt,jh="[object Map]",Eh="[object Set]",Ih=Object.prototype,Rh=Ih.hasOwnProperty;function Mh(t){if(t==null)return!0;if(Ch(t)&&(Sh(t)||typeof t=="string"||typeof t.splice=="function"||Oh(t)||xh(t)||Th(t)))return!t.length;var e=Ah(t);if(e==jh||e==Eh)return!t.size;if(Ph(t))return!wh(t).length;for(var r in t)if(Rh.call(t,r))return!1;return!0}var Nh=Mh,Lh=Nh,Uh=Te;function Fh(){this.__data__=new Uh,this.size=0}var Dh=Fh;function Bh(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var kh=Bh;function qh(t){return this.__data__.get(t)}var Hh=qh;function Gh(t){return this.__data__.has(t)}var Kh=Gh,zh=Te,Wh=st,Jh=it,Vh=200;function Xh(t,e){var r=this.__data__;if(r instanceof zh){var a=r.__data__;if(!Wh||a.length<Vh-1)return a.push([t,e]),this.size=++r.size,this;r=this.__data__=new Jh(a)}return r.set(t,e),this.size=r.size,this}var Yh=Xh,Zh=Te,Qh=Dh,ep=kh,tp=Hh,rp=Kh,ap=Yh;function Q(t){var e=this.__data__=new Zh(t);this.size=e.size}Q.prototype.clear=Qh;Q.prototype.delete=ep;Q.prototype.get=tp;Q.prototype.has=rp;Q.prototype.set=ap;var ua=Q;function np(t,e){for(var r=-1,a=t==null?0:t.length;++r<a;)if(e(t[r],r,t))return!0;return!1}var sp=np,ip=ft,op=sp,up=lt,cp=1,fp=2;function lp(t,e,r,a,n,s){var i=r&cp,o=t.length,u=e.length;if(o!=u&&!(i&&u>o))return!1;var l=s.get(t),c=s.get(e);if(l&&c)return l==e&&c==t;var f=-1,h=!0,p=r&fp?new ip:void 0;for(s.set(t,e),s.set(e,t);++f<o;){var _=t[f],w=e[f];if(a)var d=i?a(w,_,f,e,t,s):a(_,w,f,t,e,s);if(d!==void 0){if(d)continue;h=!1;break}if(p){if(!op(e,function($,T){if(!up(p,T)&&(_===$||n(_,$,r,a,s)))return p.push(T)})){h=!1;break}}else if(!(_===w||n(_,w,r,a,s))){h=!1;break}}return s.delete(t),s.delete(e),h}var ca=lp,hp=E,pp=hp.Uint8Array,fa=pp;function dp(t){var e=-1,r=Array(t.size);return t.forEach(function(a,n){r[++e]=[n,a]}),r}var gp=dp,sr=J,ir=fa,vp=nt,yp=ca,_p=gp,mp=ht,$p=1,bp=2,wp="[object Boolean]",Ap="[object Date]",Tp="[object Error]",Sp="[object Map]",Cp="[object Number]",Op="[object RegExp]",Pp="[object Set]",xp="[object String]",jp="[object Symbol]",Ep="[object ArrayBuffer]",Ip="[object DataView]",or=sr?sr.prototype:void 0,De=or?or.valueOf:void 0;function Rp(t,e,r,a,n,s,i){switch(r){case Ip:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ep:return!(t.byteLength!=e.byteLength||!s(new ir(t),new ir(e)));case wp:case Ap:case Cp:return vp(+t,+e);case Tp:return t.name==e.name&&t.message==e.message;case Op:case xp:return t==e+"";case Sp:var o=_p;case Pp:var u=a&$p;if(o||(o=mp),t.size!=e.size&&!u)return!1;var l=i.get(t);if(l)return l==e;a|=bp,i.set(t,e);var c=yp(o(t),o(e),a,n,s,i);return i.delete(t),c;case jp:if(De)return De.call(t)==De.call(e)}return!1}var Mp=Rp,Np=dt,Lp=P;function Up(t,e,r){var a=e(t);return Lp(t)?a:Np(a,r(t))}var la=Up;function Fp(t,e){for(var r=-1,a=t==null?0:t.length,n=0,s=[];++r<a;){var i=t[r];e(i,r,t)&&(s[n++]=i)}return s}var Dp=Fp;function Bp(){return[]}var ha=Bp,kp=Dp,qp=ha,Hp=Object.prototype,Gp=Hp.propertyIsEnumerable,ur=Object.getOwnPropertySymbols,Kp=ur?function(t){return t==null?[]:(t=Object(t),kp(ur(t),function(e){return Gp.call(t,e)}))}:qp,yt=Kp,zp=la,Wp=yt,Jp=Ee;function Vp(t){return zp(t,Jp,Wp)}var pa=Vp,cr=pa,Xp=1,Yp=Object.prototype,Zp=Yp.hasOwnProperty;function Qp(t,e,r,a,n,s){var i=r&Xp,o=cr(t),u=o.length,l=cr(e),c=l.length;if(u!=c&&!i)return!1;for(var f=u;f--;){var h=o[f];if(!(i?h in e:Zp.call(e,h)))return!1}var p=s.get(t),_=s.get(e);if(p&&_)return p==e&&_==t;var w=!0;s.set(t,e),s.set(e,t);for(var d=i;++f<u;){h=o[f];var $=t[h],T=e[h];if(a)var U=i?a(T,$,h,e,t,s):a($,T,h,t,e,s);if(!(U===void 0?$===T||n($,T,r,a,s):U)){w=!1;break}d||(d=h=="constructor")}if(w&&!d){var v=t.constructor,H=e.constructor;v!=H&&"constructor"in t&&"constructor"in e&&!(typeof v=="function"&&v instanceof v&&typeof H=="function"&&H instanceof H)&&(w=!1)}return s.delete(t),s.delete(e),w}var ed=Qp,Be=ua,td=ca,rd=Mp,ad=ed,fr=ne,lr=P,hr=W.exports,nd=vt,sd=1,pr="[object Arguments]",dr="[object Array]",ce="[object Object]",id=Object.prototype,gr=id.hasOwnProperty;function od(t,e,r,a,n,s){var i=lr(t),o=lr(e),u=i?dr:fr(t),l=o?dr:fr(e);u=u==pr?ce:u,l=l==pr?ce:l;var c=u==ce,f=l==ce,h=u==l;if(h&&hr(t)){if(!hr(e))return!1;i=!0,c=!1}if(h&&!c)return s||(s=new Be),i||nd(t)?td(t,e,r,a,n,s):rd(t,e,u,r,a,n,s);if(!(r&sd)){var p=c&&gr.call(t,"__wrapped__"),_=f&&gr.call(e,"__wrapped__");if(p||_){var w=p?t.value():t,d=_?e.value():e;return s||(s=new Be),n(w,d,r,a,s)}}return h?(s||(s=new Be),ad(t,e,r,a,n,s)):!1}var ud=od,cd=ud,vr=I;function da(t,e,r,a,n){return t===e?!0:t==null||e==null||!vr(t)&&!vr(e)?t!==t&&e!==e:cd(t,e,r,a,da,n)}var fd=da,ld=fd;function hd(t,e){return ld(t,e)}var pd=hd,Ve=pd,Xe={exports:{}};(function(t,e){var r=E,a=e&&!e.nodeType&&e,n=a&&!0&&t&&!t.nodeType&&t,s=n&&n.exports===a,i=s?r.Buffer:void 0,o=i?i.allocUnsafe:void 0;function u(l,c){if(c)return l.slice();var f=l.length,h=o?o(f):new l.constructor(f);return l.copy(h),h}t.exports=u})(Xe,Xe.exports);var yr=fa;function dd(t){var e=new t.constructor(t.byteLength);return new yr(e).set(new yr(t)),e}var _t=dd,gd=_t;function vd(t,e){var r=e?gd(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var yd=vd;function _d(t,e){var r=-1,a=t.length;for(e||(e=Array(a));++r<a;)e[r]=t[r];return e}var md=_d,$d=M,_r=Object.create,bd=function(){function t(){}return function(e){if(!$d(e))return{};if(_r)return _r(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),wd=bd,Ad=sa,Td=Ad(Object.getPrototypeOf,Object),mt=Td,Sd=wd,Cd=mt,Od=je;function Pd(t){return typeof t.constructor=="function"&&!Od(t)?Sd(Cd(t)):{}}var xd=Pd,jd=k,Ed=mt,Id=I,Rd="[object Object]",Md=Function.prototype,Nd=Object.prototype,ga=Md.toString,Ld=Nd.hasOwnProperty,Ud=ga.call(Object);function Fd(t){if(!Id(t)||jd(t)!=Rd)return!1;var e=Ed(t);if(e===null)return!0;var r=Ld.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&ga.call(r)==Ud}var Dd=Fd,Bd=ct,kd=Jr;function qd(t,e,r,a){var n=!r;r||(r={});for(var s=-1,i=e.length;++s<i;){var o=e[s],u=a?a(r[o],t[o],o,r,t):void 0;u===void 0&&(u=t[o]),n?kd(r,o,u):Bd(r,o,u)}return r}var se=qd;function Hd(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Gd=Hd,Kd=M,zd=je,Wd=Gd,Jd=Object.prototype,Vd=Jd.hasOwnProperty;function Xd(t){if(!Kd(t))return Wd(t);var e=zd(t),r=[];for(var a in t)a=="constructor"&&(e||!Vd.call(t,a))||r.push(a);return r}var Yd=Xd,Zd=na,Qd=Yd,eg=xe;function tg(t){return eg(t)?Zd(t,!0):Qd(t)}var $t=tg;function rg(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var ag=rg;function ng(t,e){for(var r=-1,a=t==null?0:t.length;++r<a&&e(t[r],r,t)!==!1;);return t}var sg=ng,ig=se,og=Ee;function ug(t,e){return t&&ig(e,og(e),t)}var cg=ug,fg=se,lg=$t;function hg(t,e){return t&&fg(e,lg(e),t)}var pg=hg,dg=se,gg=yt;function vg(t,e){return dg(t,gg(t),e)}var yg=vg,_g=dt,mg=mt,$g=yt,bg=ha,wg=Object.getOwnPropertySymbols,Ag=wg?function(t){for(var e=[];t;)_g(e,$g(t)),t=mg(t);return e}:bg,va=Ag,Tg=se,Sg=va;function Cg(t,e){return Tg(t,Sg(t),e)}var Og=Cg,Pg=la,xg=va,jg=$t;function Eg(t){return Pg(t,jg,xg)}var ya=Eg,Ig=Object.prototype,Rg=Ig.hasOwnProperty;function Mg(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&Rg.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Ng=Mg,Lg=_t;function Ug(t,e){var r=e?Lg(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var Fg=Ug,Dg=/\w*$/;function Bg(t){var e=new t.constructor(t.source,Dg.exec(t));return e.lastIndex=t.lastIndex,e}var kg=Bg,mr=J,$r=mr?mr.prototype:void 0,br=$r?$r.valueOf:void 0;function qg(t){return br?Object(br.call(t)):{}}var Hg=qg,Gg=_t,Kg=Fg,zg=kg,Wg=Hg,Jg=yd,Vg="[object Boolean]",Xg="[object Date]",Yg="[object Map]",Zg="[object Number]",Qg="[object RegExp]",ev="[object Set]",tv="[object String]",rv="[object Symbol]",av="[object ArrayBuffer]",nv="[object DataView]",sv="[object Float32Array]",iv="[object Float64Array]",ov="[object Int8Array]",uv="[object Int16Array]",cv="[object Int32Array]",fv="[object Uint8Array]",lv="[object Uint8ClampedArray]",hv="[object Uint16Array]",pv="[object Uint32Array]";function dv(t,e,r){var a=t.constructor;switch(e){case av:return Gg(t);case Vg:case Xg:return new a(+t);case nv:return Kg(t,r);case sv:case iv:case ov:case uv:case cv:case fv:case lv:case hv:case pv:return Jg(t,r);case Yg:return new a;case Zg:case tv:return new a(t);case Qg:return zg(t);case ev:return new a;case rv:return Wg(t)}}var gv=dv,vv=ne,yv=I,_v="[object Map]";function mv(t){return yv(t)&&vv(t)==_v}var $v=mv,bv=$v,wv=Pe,wr=te.exports,Ar=wr&&wr.isMap,Av=Ar?wv(Ar):bv,Tv=Av,Sv=ne,Cv=I,Ov="[object Set]";function Pv(t){return Cv(t)&&Sv(t)==Ov}var xv=Pv,jv=xv,Ev=Pe,Tr=te.exports,Sr=Tr&&Tr.isSet,Iv=Sr?Ev(Sr):jv,Rv=Iv,Mv=ua,Nv=sg,Lv=ct,Uv=cg,Fv=pg,Dv=Xe.exports,Bv=md,kv=yg,qv=Og,Hv=pa,Gv=ya,Kv=ne,zv=Ng,Wv=gv,Jv=xd,Vv=P,Xv=W.exports,Yv=Tv,Zv=M,Qv=Rv,ey=Ee,ty=$t,ry=1,ay=2,ny=4,_a="[object Arguments]",sy="[object Array]",iy="[object Boolean]",oy="[object Date]",uy="[object Error]",ma="[object Function]",cy="[object GeneratorFunction]",fy="[object Map]",ly="[object Number]",$a="[object Object]",hy="[object RegExp]",py="[object Set]",dy="[object String]",gy="[object Symbol]",vy="[object WeakMap]",yy="[object ArrayBuffer]",_y="[object DataView]",my="[object Float32Array]",$y="[object Float64Array]",by="[object Int8Array]",wy="[object Int16Array]",Ay="[object Int32Array]",Ty="[object Uint8Array]",Sy="[object Uint8ClampedArray]",Cy="[object Uint16Array]",Oy="[object Uint32Array]",m={};m[_a]=m[sy]=m[yy]=m[_y]=m[iy]=m[oy]=m[my]=m[$y]=m[by]=m[wy]=m[Ay]=m[fy]=m[ly]=m[$a]=m[hy]=m[py]=m[dy]=m[gy]=m[Ty]=m[Sy]=m[Cy]=m[Oy]=!0;m[uy]=m[ma]=m[vy]=!1;function pe(t,e,r,a,n,s){var i,o=e&ry,u=e&ay,l=e&ny;if(r&&(i=n?r(t,a,n,s):r(t)),i!==void 0)return i;if(!Zv(t))return t;var c=Vv(t);if(c){if(i=zv(t),!o)return Bv(t,i)}else{var f=Kv(t),h=f==ma||f==cy;if(Xv(t))return Dv(t,o);if(f==$a||f==_a||h&&!n){if(i=u||h?{}:Jv(t),!o)return u?qv(t,Fv(i,t)):kv(t,Uv(i,t))}else{if(!m[f])return n?t:{};i=Wv(t,f,o)}}s||(s=new Mv);var p=s.get(t);if(p)return p;s.set(t,i),Qv(t)?t.forEach(function(d){i.add(pe(d,e,r,d,t,s))}):Yv(t)&&t.forEach(function(d,$){i.set($,pe(d,e,r,$,t,s))});var _=l?u?Gv:Hv:u?ty:ey,w=c?void 0:_(t);return Nv(w||t,function(d,$){w&&($=d,d=t[$]),Lv(i,$,pe(d,e,r,$,t,s))}),i}var Py=pe;function xy(t,e,r){var a=-1,n=t.length;e<0&&(e=-e>n?0:n+e),r=r>n?n:r,r<0&&(r+=n),n=e>r?0:r-e>>>0,e>>>=0;for(var s=Array(n);++a<n;)s[a]=t[a+e];return s}var jy=xy,Ey=zr,Iy=jy;function Ry(t,e){return e.length<2?t:Ey(t,Iy(e,0,-1))}var My=Ry,Ny=Oe,Ly=ag,Uy=My,Fy=ut;function Dy(t,e){return e=Ny(e,t),t=Uy(t,e),t==null||delete t[Fy(Ly(e))]}var By=Dy,ky=Dd;function qy(t){return ky(t)?void 0:t}var Hy=qy,Gy=Pf;function Ky(t){var e=t==null?0:t.length;return e?Gy(t,1):[]}var zy=Ky,Wy=zy,Jy=Qr,Vy=ea;function Xy(t){return Vy(Jy(t,void 0,Wy),t+"")}var Yy=Xy,Zy=Ce,Qy=Py,e_=By,t_=Oe,r_=se,a_=Hy,n_=Yy,s_=ya,i_=1,o_=2,u_=4,c_=n_(function(t,e){var r={};if(t==null)return r;var a=!1;e=Zy(e,function(s){return s=t_(s,t),a||(a=s.length>1),s}),r_(t,s_(t),r),a&&(r=Qy(r,i_|o_|u_,a_));for(var n=e.length;n--;)e_(r,e[n]);return r}),f_=c_,re=f_;const l_=[{method:"getRegistries",fallback:[],type:"Registries"},{method:"getSchemes",fallback:[],type:"Schemes"},{method:"vocSearch",fallback:[],type:"Schemes"},{method:"getTypes",fallback:[],type:"Types"},{method:"suggest",fallback:["",[],[],[]]},{method:"vocSuggest",fallback:["",[],[],[]]},{method:"getConcordances",fallback:[],type:"Concordances"},{method:"getOccurrences",fallback:[],type:"Occurrences"},{method:"getTop",fallback:[],type:"Concepts"},{method:"getConcepts",fallback:[],type:"Concepts"},{method:"getNarrower",fallback:[],type:"Concepts"},{method:"getAncestors",fallback:[],type:"Concepts"},{method:"search",fallback:[],type:"Concepts"},{method:"getMapping",fallback:null,type:"Mapping"},{method:"getMappings",fallback:[],type:"Mappings"},{method:"postMapping",fallback:null,type:"Mapping"},{method:"postMappings",fallback:[],type:"Mapping"},{method:"putMapping",fallback:null,type:"Mapping"},{method:"patchMapping",fallback:null,type:"Mapping"},{method:"deleteMapping",fallback:!1},{method:"deleteMappings",fallback:[]},{method:"getAnnotations",fallback:[],type:"Annotations"},{method:"postAnnotation",fallback:null,type:"Annotation"},{method:"putAnnotation",fallback:null,type:"Annotation"},{method:"patchAnnotation",fallback:null,type:"Annotation"},{method:"deleteAnnotation",fallback:!1}];function ye(...t){let[e,...r]=t;for(let a of r)e.endsWith("/")||(e+="/"),a.startsWith("/")&&(a=a.slice(1)),e+=a;return e}function de(t,e){return t._totalCount=e._totalCount,t._url=e._url,t}const ba=["schemes","top","data","concepts","narrower","ancestors","types","suggest","search","auth","mappings","concordances","annotations","occurrences"];class B{constructor(e={}){this._jskos=e,this.axios=he.create({timeout:2e4}),this._path=typeof window!="undefined"&&window.location.pathname,this.has={},this._defaultLanguages="en,de,fr,es,nl,it,fi,pl,ru,cs,jp".split(","),this.languages=[],this._auth={key:null,bearerToken:null},this._repeating=[],this._api={status:e.status,schemes:Array.isArray(e.schemes)?void 0:e.schemes,top:e.top,data:e.data,concepts:e.concepts,narrower:e.narrower,ancestors:e.ancestors,types:e.types,suggest:e.suggest,search:e.search,"voc-suggest":e["voc-suggest"],"voc-search":e["voc-search"],mappings:e.mappings,concordances:e.concordances,annotations:e.annotations,occurrences:e.occurrences,reconcile:e.reconcile,api:e.api},this._config={},this.setRetryConfig(),this.axios.interceptors.request.use(a=>{if(!a._skipAdditionalParameters){const n=pc([].concat(y(a,"params.language","").split(","),this.languages,this._defaultLanguages).filter(s=>s!="")).join(",");ge(a,"params.language",n),this.has.auth&&this._auth.bearerToken&&!y(a,"headers.Authorization")&&ge(a,"headers.Authorization",`Bearer ${this._auth.bearerToken}`)}if(a.url.startsWith("http:")&&typeof window!="undefined"&&window.location.protocol=="https:")throw new he.Cancel("Can't call http API from https.");return a}),this.axios.interceptors.response.use(({data:a,headers:n={},config:s={}})=>{a=A.normalize(a);let i=s.url;if(i.endsWith("?")||(i+="?"),Yl(s.params||{},(o,u)=>{i+=`${u}=${encodeURIComponent(o)}&`}),P(a)||M(a)){let o=parseInt(n["x-total-count"]);isNaN(o)||(a._totalCount=o),a._url=i}return a},a=>{const n=y(a,"config._retryCount",0),s=y(a,"config.method"),i=y(a,"response.status");return this._retryConfig.methods.includes(s)&&this._retryConfig.statusCodes.includes(i)&&n<this._retryConfig.count?(a.config._retryCount=n+1,a.config.data&&(a.config.data=JSON.parse(a.config.data)),new Promise((o,u)=>{setTimeout(()=>{this.axios(a.config).then(o).catch(u)},(()=>{const l=this._retryConfig.delay;return typeof l=="function"?l(n):l})())})):Promise.reject(a)});const r=[];for(let{method:a,type:n}of l_){const s=this[a]&&this[a].bind(this);if(!s){this[a]=()=>{throw new wa({method:a})};continue}this[a]=(i={})=>{if(i._raw)return delete i._raw,s(i);const o=r.find(f=>f.method==a&&Ve(f.options,i));if(o)return o.promise;let u;i.cancelToken||(u=this.getCancelTokenSource(),i.cancelToken=u.token);const l=this.init().then(()=>s(i)).then(f=>(P(f)&&f._totalCount===void 0?f._totalCount=f.length:M(f)&&f._totalCount===void 0&&(f._totalCount=1),f&&n&&this[`adjust${n}`]&&(f=this[`adjust${n}`](f)),f)).catch(f=>{throw f instanceof x?f:f.response?f.response.status.toString().startsWith(4)?new Aa({relatedError:f,code:f.response.status}):new Ta({relatedError:f,code:f.response.status}):f.request?typeof navigator!="undefined"&&(navigator.connection||navigator.mozConnection||navigator.webkitConnection)?new Sa({relatedError:f}):new Ca({relatedError:f}):new x({relatedError:f})});u&&(l.cancel=(...f)=>u.cancel(...f));const c={method:a,options:re(i,["cancelToken"]),promise:l};return r.push(c),l.catch(()=>{}).then(()=>r.splice(r.indexOf(c),1)),l}}}get uri(){return this._jskos.uri}get notation(){return this._jskos.notation}get prefLabel(){return this._jskos.prefLabel}get definition(){return this._jskos.definition}get schemes(){return this._jskos.schemes}get excludedSchemes(){return this._jskos.excludedSchemes}get stored(){return this._jskos.stored!==void 0?this._jskos.stored:this.constructor.stored}async init(){return this._init?this._init:(this._init=(async()=>{this._prepare();let e;if(N(this._api.status))try{e=await this.axios({method:"get",url:this._api.status})}catch(r){y(r,"response.status")===404&&(this._api.status=null)}else e=this._api.status;if(M(e)&&!Lh(e)){this._config=e.config||{};for(let r of Object.keys(this._api))this._api[r]===void 0&&(this._api[r]=e[r]||null)}this._setup()})(),this._init)}_prepare(){}_setup(){}getCancelTokenSource(){return he.CancelToken.source()}setAuth({key:e=this._auth.key,bearerToken:r=this._auth.bearerToken}){this._auth.key=e,this._auth.bearerToken=r}setRetryConfig(e={}){this._retryConfig=Object.assign({methods:["get","head","options"],statusCodes:[401,403],count:3,delay:r=>300*r},e)}isAuthorizedFor({type:e,action:r,user:a,crossUser:n}){if(r=="read"&&this.has[e]===!0)return!0;if(!this.has[e])return!1;const s=y(this._config,`${e}.${r}`);if(!s)return!!this.has[e][r];if(s.auth&&(!a||!this._auth.key)||s.auth&&this._auth.key!=y(this._config,"auth.key"))return!1;const i=[a.uri].concat(Object.values(a.identities||{}).map(o=>o.uri)).filter(o=>o!=null);if(s.auth&&s.identities&&Fe(i,s.identities).length==0)return!1;if(s.auth&&s.identityProviders){const o=Object.keys(a&&a.identities||{});if(Fe(o,s.identityProviders).length==0)return!1}return n?s.crossUser===!0||Fe(s.crossUser||[],i).length>0:!!this.has[e][r]}supportsScheme(e){if(!e)return!1;let r=P(this.schemes)?this.schemes:null;return r==null&&!A.isContainedIn(e,this.excludedSchemes||[])?!0:A.isContainedIn(e,r)}adjustConcept(e){if(!e||e.__SAVED__)return e;e._getNarrower=r=>this.getNarrower({...r,concept:e}),e._getAncestors=r=>this.getAncestors({...r,concept:e}),e._getDetails=async r=>(await this.getConcepts({...r,concepts:[e]}))[0];for(let r of["broader","narrower","ancestors"])Array.isArray(e[r])&&e[r].length&&!e[r].includes(null)&&(e[r]=this.adjustConcepts(e[r]));return e._registry=this,e}adjustConcepts(e){return de(e.map(r=>this.adjustConcept(r)),e)}adjustRegistries(e){return e}adjustScheme(e){if(!e||e.__SAVED__)return e;const r=e._registry;return e._registry=this.cdk&&this.cdk.registryForScheme(e),!e._registry||r===e._registry||e._registry._api.api===this._api.api?e._registry=r||this:["concepts","topConcepts"].forEach(a=>{Array.isArray(e[a])&&(e[a].length===0||e[a][0]===null)&&delete e[a]}),e._registry&&(e._getTop=a=>e._registry.getTop({...a,scheme:e}),e._getTypes=a=>e._registry.getTypes({...a,scheme:e}),e._suggest=({search:a,...n})=>e._registry.suggest({...n,search:a,scheme:e})),e}adjustSchemes(e){return de(e.map(r=>this.adjustScheme(r)),e)}adjustConcordances(e){for(let r of e)r._registry=this;return e}adjustMapping(e){for(let r of["from","to"]){let a=`${r}Scheme`;e[a]||(e[a]=y(A.conceptsOfMapping(e,r),"[0].inScheme[0]",null))}if(e._registry=this,!e.identifier){let r=y(A.addMappingIdentifiers(e),"identifier");r&&(e.identifier=r)}return e}adjustMappings(e){return de(e.map(r=>this.adjustMapping(r)),e)}async postMappings({mappings:e,...r}={}){if(!e||!e.length)throw new g({parameter:"mappings"});return this._callHelperForArrayWrappers({method:"postMapping",items:e,itemProperty:"mapping",config:r})}async deleteMappings({mappings:e,...r}={}){if(!e||!e.length)throw new g({parameter:"mappings"});return this._callHelperForArrayWrappers({method:"deleteMapping",items:e,itemProperty:"mapping",config:r})}async _callHelperForArrayWrappers({method:e,items:r,itemProperty:a,config:n}){const s=[],i=await Promise.all(r.map(async o=>{try{return await this[e]({[a]:o,...n,_raw:!0})}catch(u){return s[r.indexOf(o)]=u,null}}));return i._errors=s,i}}B.providerName="Base";class bt extends B{_prepare(){this._api.api&&this._api.status===void 0&&(this._api.status=ye(this._api.api,"/status")),this.has.mappings=!0,this.has.concordances=!0,this.has.annotations=!0,ba.filter(e=>!this.has[e]).forEach(e=>{this.has[e]=!1})}_setup(){if(this._api.api){const e={mappings:"/mappings",concordances:"/concordances",annotations:"/annotations"};for(let r of Object.keys(e))this._api[r]===void 0&&(this._api[r]=ye(this._api.api,e[r]))}this.has.mappings=this._api.mappings?{}:!1,this.has.mappings&&(this.has.mappings.read=!!y(this._config,"mappings.read",!0),this.has.mappings.create=!!y(this._config,"mappings.create"),this.has.mappings.update=!!y(this._config,"mappings.update"),this.has.mappings.delete=!!y(this._config,"mappings.delete"),this.has.mappings.anonymous=!!y(this._config,"mappings.anonymous")),this.has.concordances=this._api.concordances?{}:!1,this.has.concordances&&(this.has.concordances.read=!!y(this._config,"concordances.read"),this.has.concordances.create=!!y(this._config,"concordances.create"),this.has.concordances.update=!!y(this._config,"concordances.update"),this.has.concordances.delete=!!y(this._config,"concordances.delete")),this.has.annotations=this._api.annotations?{}:!1,this.has.annotations&&(this.has.annotations.read=!!y(this._config,"annotations.read"),this.has.annotations.create=!!y(this._config,"annotations.create"),this.has.annotations.update=!!y(this._config,"annotations.update"),this.has.annotations.delete=!!y(this._config,"annotations.delete")),this.has.auth=y(this._config,"auth.key")!=null,this._defaultParams={properties:"annotations"}}async getMapping({mapping:e,...r}){if(!e)throw new g({parameter:"mapping"});if(!e.uri||!e.uri.startsWith(this._api.mappings))throw new g({parameter:"mapping",message:"URI doesn't seem to be part of this registry."});try{return await this.axios({...r,url:e.uri,params:{...this._defaultParams,...r.params||{}}})}catch(a){if(y(a,"response.status")==404)return null;throw a}}async getMappings({from:e,fromScheme:r,to:a,toScheme:n,creator:s,type:i,partOf:o,offset:u,limit:l,direction:c,mode:f,identifier:h,cardinality:p,annotatedBy:_,annotatedFor:w,annotatedWith:d,sort:$,order:T,...U}){let v={},H=this._api.mappings;return e&&(v.from=N(e)?e:e.uri),r&&(v.fromScheme=N(r)?r:r.uri),a&&(v.to=N(a)?a:a.uri),n&&(v.toScheme=N(n)?n:n.uri),s&&(v.creator=N(s)?s:A.prefLabel(s)),i&&(v.type=N(i)?i:i.uri),o&&(v.partOf=N(o)?o:o.uri),u&&(v.offset=u),l&&(v.limit=l),c&&(v.direction=c),p&&(v.cardinality=p),_&&(v.annotatedBy=_),w&&(v.annotatedFor=w),d&&(v.annotatedWith=d),f&&(v.mode=f),h&&(v.identifier=h),$&&(v.sort=$),T&&(v.order=T),this.axios({...U,method:"get",url:H,params:{...this._defaultParams,...U.params||{},...v}})}async postMapping({mapping:e,...r}){if(!e)throw new g({parameter:"mapping"});return e=A.minifyMapping(e),e=A.addMappingIdentifiers(e),this.axios({...r,method:"post",url:this._api.mappings,data:e,params:{...this._defaultParams,...r.params||{}}})}async putMapping({mapping:e,...r}){if(!e)throw new g({parameter:"mapping"});e=A.minifyMapping(e),e=A.addMappingIdentifiers(e);const a=e.uri;if(!a||!a.startsWith(this._api.mappings))throw new g({parameter:"mapping",message:"URI doesn't seem to be part of this registry."});return this.axios({...r,method:"put",url:a,data:e,params:{...this._defaultParams,...r.params||{}}})}async patchMapping({mapping:e,...r}){if(!e)throw new g({parameter:"mapping"});const a=e.uri;if(!a||!a.startsWith(this._api.mappings))throw new g({parameter:"mapping",message:"URI doesn't seem to be part of this registry."});return this.axios({...r,method:"patch",url:a,data:re(e,"uri"),params:{...this._defaultParams,...r.params||{}}})}async deleteMapping({mapping:e,...r}){if(!e)throw new g({parameter:"mapping"});const a=e.uri;if(!a||!a.startsWith(this._api.mappings))throw new g({parameter:"mapping",message:"URI doesn't seem to be part of this registry."});return await this.axios({...r,method:"delete",url:a}),!0}async getAnnotations({target:e,...r}){return e&&ge(r,"params.target",e),this.axios({...r,method:"get",url:this._api.annotations})}async postAnnotation({annotation:e,...r}){return this.axios({...r,method:"post",url:this._api.annotations,data:e})}async putAnnotation({annotation:e,...r}){const a=e.id;if(!a||!a.startsWith(this._api.annotations))throw new g({parameter:"annotation",message:"URI doesn't seem to be part of this registry."});return this.axios({...r,method:"put",url:a,data:e})}async patchAnnotation({annotation:e,...r}){const a=e.id;if(!a||!a.startsWith(this._api.annotations))throw new g({parameter:"annotation",message:"URI doesn't seem to be part of this registry."});return this.axios({...r,method:"patch",url:a,data:e})}async deleteAnnotation({annotation:e,...r}){const a=e.id;if(!a||!a.startsWith(this._api.annotations))throw new g({parameter:"annotation",message:"URI doesn't seem to be part of this registry."});return await this.axios({...r,method:"delete",url:a}),!0}async getConcordances(e){return this.axios({...e,method:"get",url:this._api.concordances})}async postConcordance({concordance:e,...r}){if(!e)throw new g({parameter:"concordance"});return this.axios({...r,method:"post",url:this._api.concordances,data:e,params:{...this._defaultParams,...r.params||{}}})}async putConcordance({concordance:e,...r}){if(!e)throw new g({parameter:"concordance"});const a=e.uri;if(!a||!a.startsWith(this._api.concordances))throw new g({parameter:"concordance",message:"URI doesn't seem to be part of this registry."});return this.axios({...r,method:"put",url:a,data:e,params:{...this._defaultParams,...r.params||{}}})}async patchConcordance({concordance:e,...r}){if(!e)throw new g({parameter:"concordance"});const a=e.uri;if(!a||!a.startsWith(this._api.concordances))throw new g({parameter:"concordance",message:"URI doesn't seem to be part of this registry."});return this.axios({...r,method:"patch",url:a,data:re(e,"uri"),params:{...this._defaultParams,...r.params||{}}})}async deleteConcordance({concordance:e,...r}){if(!e)throw new g({parameter:"concordance"});const a=e.uri;if(!a||!a.startsWith(this._api.concordances))throw new g({parameter:"concordance",message:"URI doesn't seem to be part of this registry."});return await this.axios({...r,method:"delete",url:a}),!0}}bt.providerName="MappingsApi";bt.stored=!0;class wt extends B{_prepare(){this._api.api&&this._api.status===void 0&&(this._api.status=ye(this._api.api,"/status")),this.has.schemes=!0,this.has.top=!0,this.has.data=!0,this.has.concepts=!0,this.has.narrower=!0,this.has.ancestors=!0,this.has.types=!0,this.has.suggest=!0,this.has.search=!0,this.has.auth=!0,ba.filter(e=>!this.has[e]).forEach(e=>{this.has[e]=!1})}_setup(){if(this._api.api){const e={schemes:"/voc",top:"/voc/top",concepts:"/voc/concepts",data:"/data",narrower:"/narrower",ancestors:"/ancestors",types:"/types",suggest:"/suggest",search:"/search"};for(let r of Object.keys(e))this._api[r]===void 0&&(this._api[r]=ye(this._api.api,e[r]))}this.has.schemes=!!this._api.schemes,!this.has.schemes&&Array.isArray(this.schemes)&&(this.has.schemes=!0),this.has.top=!!this._api.top,this.has.data=!!this._api.data,this.has.concepts=!!this._api.concepts||this.has.data,this.has.narrower=!!this._api.narrower,this.has.ancestors=!!this._api.ancestors,this.has.types=!!this._api.types,this.has.suggest=!!this._api.suggest,this.has.search=!!this._api.search,this.has.auth=y(this._config,"auth.key")!=null,this._defaultParams={properties:"+created,issued,modified,editorialNote,scopeNote"}}static _registryConfigForBartocApiConfig({url:e,scheme:r}={}){return!e||!r?null:{api:e,schemes:[r]}}async _getSchemeUri(e){this._approvedSchemes=this._approvedSchemes||[],this._rejectedSchemes=this._rejectedSchemes||[];let r=this._approvedSchemes.find(s=>A.compare(e,s));if(r)return r.uri;if(this._rejectedSchemes.find(s=>A.compare(e,s)))return null;const n=(await this.getSchemes({params:{uri:A.getAllUris(e).join("|")}})).find(s=>A.compare(s,e));return n?(this._approvedSchemes.push({uri:n.uri,identifier:A.getAllUris(e)}),n.uri):(this._rejectedSchemes.push({uri:e.uri,identifier:e.identifier}),null)}async getSchemes(e){if(!this._api.schemes){if(Array.isArray(this.schemes))return this.schemes;throw new F}const r=await this.axios({...e,method:"get",url:this._api.schemes,params:{...this._defaultParams,limit:500,...e.params||{}}});return Array.isArray(this.schemes)?de(r.filter(a=>A.isContainedIn(a,this.schemes)),r):r}async getTop({scheme:e,...r}){if(!this._api.top)throw new F;if(!e)throw new g({parameter:"scheme"});const a=await this._getSchemeUri(e);if(!a)throw new g({parameter:"scheme",message:"Requested vocabulary seems to be unsupported by this API."});return Array.isArray(this._api.top)?this._api.top:this.axios({...r,method:"get",url:this._api.top,params:{...this._defaultParams,limit:1e4,...r.params||{},uri:a}})}async getConcepts({concepts:e,...r}){if(this.has.data===!1)throw new F;if(!e)throw new g({parameter:"concepts"});Array.isArray(e)||(e=[e]);let a=e.map(n=>n.uri).filter(n=>n!=null);return this.axios({...r,method:"get",url:this._api.data,params:{...this._defaultParams,limit:500,...r.params||{},uri:a.join("|")}})}async getNarrower({concept:e,...r}){if(!this._api.narrower)throw new F;if(!e||!e.uri)throw new g({parameter:"concept"});return this.axios({...r,method:"get",url:this._api.narrower,params:{...this._defaultParams,limit:1e4,...r.params||{},uri:e.uri}})}async getAncestors({concept:e,...r}){if(!this._api.ancestors)throw new F;if(!e||!e.uri)throw new g({parameter:"concept"});return this.axios({...r,method:"get",url:this._api.ancestors,params:{...this._defaultParams,limit:1e4,...r.params||{},uri:e.uri}})}async suggest({use:e="notation,label",types:r=[],sort:a="score",...n}){return this._search({...n,endpoint:"suggest",params:{...n.params,type:r.join("|"),use:e,sort:a}})}async search({types:e=[],...r}){return this._search({...r,endpoint:"search",params:{...r.params,type:e.join("|")}})}async vocSuggest({use:e="notation,label",sort:r="score",...a}){return this._search({...a,endpoint:"voc-suggest",params:{...a.params,use:e,sort:r}})}async vocSearch(e){return this._search({...e,endpoint:"voc-search"})}async _search({endpoint:e,scheme:r,search:a,limit:n,offset:s,params:i,...o}){let u=this._api[e];if(!u)throw new F;if(!a)throw new g({parameter:"search"});n=n||this._jskos.suggestResultLimit||100,s=s||0;const l=r&&await this._getSchemeUri(r);return u=u.replace("{searchTerms}",a),this.axios({...o,params:{...this._defaultParams,...i,limit:n,count:n,offset:s,search:a,query:a,voc:l},method:"get",url:u})}async getTypes({scheme:e,...r}){if(!this._api.types)throw new F;if(Array.isArray(this._api.types))return this._api.types;const a=e&&await this._getSchemeUri(e);return a&&ge(r,"params.uri",a),this.axios({...r,method:"get",url:this._api.types})}}wt.providerName="ConceptApi";wt.providerType="http://bartoc.org/api-type/jskos";const R={[B.providerName]:B,init(t){if(this[t.provider])return new this[t.provider](t);throw new Tt},addProvider(t){if(t.prototype instanceof B||t===B)this[t.providerName]=t;else throw new Tt}};R.addProvider(wt);R.addProvider(bt);const ke={};class At{constructor(e){this.config=e,this.axios=he.create()}setConfig(e){this.config=e}get config(){return this._config}set config(e){e=e||{},e.registries=e.registries||[],e.registries=e.registries.map(r=>R.init(r)).filter(r=>r),e.registries.forEach(r=>{r.cdk=this}),this._config=e}get providers(){return R}createInstance(e){return new At(e)}async loadConfig(e){const r=await this.axios.get(e);this.config=r.data}loadBuildInfo({url:e,buildInfo:r=null,interval:a=6e4,callback:n,...s}){if(!e&&!this.config.cocodaBaseUrl)throw new x({message:"Could not determine URL to load build config."});return e||(e=`${this.config.cocodaBaseUrl}build-info.json`),this.repeat({...s,function:async()=>(await this.axios.get(e,{headers:{"Cache-Control":"no-cache"}})).data,interval:a,callback:(i,o,u)=>{i?n(i):(u||!u&&r&&!Ve(o,r))&&n(null,o,u||r)}})}getRegistryForUri(e){return this.config.registries.find(r=>r.uri==e)}initializeRegistry(e){return e=R.init(e),e.cdk=this,e}addProvider(e){R.addProvider(e)}static addProvider(e){R.addProvider(e)}repeat({function:e,interval:r=15e3,callback:a,callImmediately:n=!0}={}){if(!e)throw new g({parameter:"function"});if(typeof e!="function")throw new g({parameter:"function",message:"function needs to be a function"});const s=async()=>e();if(r=parseInt(r),isNaN(r))throw new g({parameter:"interval"});if(!a)throw new g({parameter:"callback"});if(typeof a!="function")throw new g({parameter:"callback",message:"callback needs to be a function"});let i={timer:null,result:null,error:null,isPaused:!1,interval:r};const o=h=>{const p=i.result;Ve(p,h)||(i.result=h,i.error=null,a(null,h,p))},u=h=>{i.error=h,a(h)},l=h=>{i.isPaused||(i.timer=setTimeout(()=>{h()},i.interval))},c=()=>s().then(o).catch(u).then(()=>l(c)),f=(h=n)=>{h?c():l(c)};return f(),{start:(...h)=>{i.isPaused=!1,f(...h)},stop:()=>{i.isPaused=!0,i.timer?clearTimeout(i.timer):setTimeout(()=>{i.timer&&clearTimeout(i.timer)},i.interval)},get isPaused(){return i.isPaused},get lastResult(){return i.result},get hasErrored(){return!!i.error},get interval(){return i.interval},set interval(h){i.interval=h}}}async getSchemes(e={}){let r=[],a=[];for(let n of this.config.registries)if(n.has.schemes!==!1){let s=n.getSchemes(e).then(i=>{for(let o of i){o._registry=n,o.__DETAILSLOADED__=1,o.type=o.type||["http://www.w3.org/2004/02/skos/core#ConceptScheme"];let u=r.find(h=>A.compare(h,o)),l,c,f=!1;if(u){l=this.config.registries.indexOf(n),l!=-1&&(l=this.config.registries.length-l),c=this.config.registries.indexOf(y(u,"_registry")),c!=-1&&(c=this.config.registries.length-c);let h=o.concepts?o.concepts.length==0?-1:1:0,p=u.concepts?u.concepts.length==0?-1:1:0;h>p?f=!0:h<p?f=!1:f=c<l}if(!u||f){if(f){let h=r.findIndex(p=>A.compare(p,u));h!=-1&&r.splice(h,1),o=A.merge(o,re(u,["concepts","topConcepts"]),{mergeUris:!0,skipPaths:["_registry"]})}o._registry=n,r.push(o)}else{const h=r.findIndex(p=>A.compare(p,o));if(h!=-1){const p=r[h]._registry;r[h]=A.merge(r[h],re(o,["concepts","topConcepts"]),{mergeUris:!0,skipPaths:["_registry"]}),r[h]._registry=p}}}}).catch(i=>{console.warn("Couldn't load schemes for registry",n.uri,i)});a.push(s)}return await Promise.all(a),r.forEach(n=>{const s=n._registry;delete n._registry;const i=this.registryForScheme(n);!i||i._api.api===s._api.api?n._registry=s:n._registry=i}),A.sortSchemes(r.filter(Boolean))}registryForScheme(e){let r=e._registry;if(r)return r;for(let{type:a,...n}of e.API||[]){const s=n.url;if(ke[s]){const i=ke[s];return Array.isArray(i._jskos.schemes)&&!A.isContainedIn(e,i._jskos.schemes)&&i._jskos.schemes.push(e),i}else{const i=Object.values(R).find(u=>u.providerType===a);if(!i||!i._registryConfigForBartocApiConfig)continue;const o=i.providerName;if(n.scheme=e,n=R[o]._registryConfigForBartocApiConfig(n),!n)continue;n.provider=o;try{if(r=this.initializeRegistry(n),r)return ke[s]=r,r}catch{continue}}}return null}}const d_=new At;export{d_ as c};
