/*!
 * jskos-tools v1.0.36
 * Copyright (c) 2024 Verbundzentrale des GBV (VZG)
 * @license MIT
 */function ae(e){var t=function(R,F){var k=R<<F|R>>>32-F;return k},r=function(R){var F="",k,re;for(k=7;k>=0;k--)re=R>>>k*4&15,F+=re.toString(16);return F},i,n,o,a=new Array(80),c=1732584193,f=4023233417,u=2562383102,s=271733878,g=3285377520,h,p,m,d,w,y;e=unescape(encodeURIComponent(e));var A=e.length,S=[];for(n=0;n<A-3;n+=4)o=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),S.push(o);switch(A%4){case 0:n=2147483648;break;case 1:n=e.charCodeAt(A-1)<<24|8388608;break;case 2:n=e.charCodeAt(A-2)<<24|e.charCodeAt(A-1)<<16|32768;break;case 3:n=e.charCodeAt(A-3)<<24|e.charCodeAt(A-2)<<16|e.charCodeAt(A-1)<<8|128;break}for(S.push(n);S.length%16!==14;)S.push(0);for(S.push(A>>>29),S.push(A<<3&4294967295),i=0;i<S.length;i+=16){for(n=0;n<16;n++)a[n]=S[i+n];for(n=16;n<=79;n++)a[n]=t(a[n-3]^a[n-8]^a[n-14]^a[n-16],1);for(h=c,p=f,m=u,d=s,w=g,n=0;n<=19;n++)y=t(h,5)+(p&m|~p&d)+w+a[n]+1518500249&4294967295,w=d,d=m,m=t(p,30),p=h,h=y;for(n=20;n<=39;n++)y=t(h,5)+(p^m^d)+w+a[n]+1859775393&4294967295,w=d,d=m,m=t(p,30),p=h,h=y;for(n=40;n<=59;n++)y=t(h,5)+(p&m|p&d|m&d)+w+a[n]+2400959708&4294967295,w=d,d=m,m=t(p,30),p=h,h=y;for(n=60;n<=79;n++)y=t(h,5)+(p^m^d)+w+a[n]+3395469782&4294967295,w=d,d=m,m=t(p,30),p=h,h=y;c=c+h&4294967295,f=f+p&4294967295,u=u+m&4294967295,s=s+d&4294967295,g=g+w&4294967295}return y=r(c)+r(f)+r(u)+r(s)+r(g),y.toLowerCase()}function oe(e){return e.map(t=>t&&t.uri).filter(Boolean)}function q(e){return["memberSet","memberList","memberChoice"].find(t=>e[t])}function ne(e){const t=q(e),r=e[t]?oe(e[t]):[];return{[r.length>1?t:"memberSet"]:r.map(i=>({uri:i}))}}function H(e){const{from:t,to:r,type:i}=e;let n={from:ne(t||{}),to:ne(r||{}),type:[i&&i[0]||"http://www.w3.org/2004/02/skos/core#mappingRelation"]};for(let o of["from","to"])if((n[o][q(n[o])]||[]).length==0){let a=e[o+"Scheme"];a&&a.uri&&(n[o+"Scheme"]={uri:a.uri})}return n}function Z(e){const{from:t,to:r}=e,i=[t,r].filter(Boolean).map(n=>oe(n[q(n)]||[]));return[].concat(...i).sort()}function K(e){const t=JSON.stringify(H(e),["from","fromScheme","to","toScheme","type","memberSet","memberList","memberChoice","uri"]);return"urn:jskos:mapping:content:"+ae(t+`
`)}function W(e){const t=JSON.stringify(Z(e));return"urn:jskos:mapping:members:"+ae(t+`
`)}function $(e){const t=(e.identifier||[]).filter(r=>r&&!r.startsWith("urn:jskos:mapping:")).concat([W(e),K(e)]).sort();return Object.assign({},e,{identifier:t})}function se(e,t,r){e=e&&$(e),t=t&&$(t);let i=e&&e.identifier?e.identifier.find(o=>o.startsWith(r)):null,n=t&&t.identifier?t.identifier.find(o=>o.startsWith(r)):null;return i==n}function G(e,t){return se(e,t,"urn:jskos:mapping:content:")}const fe=G;function ce(e,t){return se(e,t,"urn:jskos:mapping:members:")}var Ie=Object.freeze({__proto__:null,addMappingIdentifiers:$,compareMappingContent:fe,compareMappingMembers:ce,compareMappings:G,mappingContent:H,mappingContentIdentifier:K,mappingMembers:Z,mappingMembersIdentifier:W});function E(e,t,r){var i=Array.prototype.slice,n=typeof Object.keys=="function"?Object.keys:function(u){var s=[];for(var g in u)s.push(g);return s},o=function(u,s){return u===s?!0:u instanceof Date&&s instanceof Date?u.getTime()===s.getTime():typeof u!="object"&&typeof s!="object"?u==s:f(u,s)};function a(u){return u==null}function c(u){return Object.prototype.toString.call(u)=="[object Arguments]"}function f(u,s){if(a(u)||a(s)||u.prototype!==s.prototype)return!1;if(c(u))return c(s)?(u=i.call(u),s=i.call(s),o(u,s)):!1;try{var g=n(u),h=n(s),p,m}catch{return!1}if(g.length!=h.length)return!1;for(g.sort(),h.sort(),m=g.length-1;m>=0;m--)if(g[m]!=h[m])return!1;for(m=g.length-1;m>=0;m--)if(p=g[m],r){let d=r(u[p],s[p],p);if(d===void 0&&(d=E(u[p],s[p])),!d)return!1}else if(!o(u[p],s[p]))return!1;return!0}return o(e,t)}function l(e,t,r=void 0){const i=o=>String.prototype.split.call(t,o).filter(Boolean).reduce((a,c)=>a!=null?a[c]:a,e),n=i(/[,[\]]+?/)||i(/[,[\].]+?/);return n===void 0||n===e?r:n}function M(e,t){return t.reduce((r,i)=>(e&&e.hasOwnProperty(i)&&(r[i]=e[i]),r),{})}function N(e,t){for(let r in e)e.hasOwnProperty(r)&&t(e[r],r)}function _(e){return typeof e=="object"&&e!==null}function P(e){return!!(e&&typeof e.valueOf()=="string")}function Be(e,t){return[...new Set([...e,...t])]}function Pe(e,t,r){return[...e,...t].reduce((i,n)=>(i.findIndex(o=>r(o,n))!==-1||i.push(n),i),[])}function je(e,t){for(let r of t){typeof r=="string"&&(r=r.split("."));for(let i=0;i<r.length-1;i++)e=e[r[i]],typeof e>"u";delete e[r.pop()]}}var j=[{RELEVANCE:"very high",broader:[{uri:"http://www.w3.org/2004/02/skos/core#closeMatch"}],definition:{de:["gleiche Bedeutung"],en:["same meaning"]},notation:["="],prefLabel:{ar:"تطابق تام",be:"дакладная адпаведнасць","be-tarask":"дакладная адпаведнасьць",bn:"হুবুহু মিল",bs:"tačno podudaranje",ca:"equivalència exacta",cs:"přesná shoda",da:"exact match",de:"exakte Übereinstimmung",el:"ακριβής αντιστοιχία",en:"exact match",eo:"ekzakta ekvivalento",es:"equivalencia exacta",et:"täpne vaste",fi:"vastaava käsite",fr:"équivalence exacte",gl:"correspondencia exacta",he:"התאמה מדויקת",hu:"pontos egyezés",id:"sama persis",it:"corrispondenza esatta",ja:"完全一致",lv:"tieša sakritība",mk:"точно совпаѓање",ms:"padanan tepat","ms-arab":"ڤادنن تڤت",nb:"eksakt samsvar",nl:"exacte match",nn:"eksakt samsvar",pl:"dokładne dopasowanie",pt:"correspondência exata",ro:"echivalentul exact",ru:"точное соответствие",sl:"natančno ujemanje",sq:"përputhje e përpiktë",sr:"тачно подударање",sv:"exakt träff",tr:"tam eşleşme",uk:"точна відповідність",ur:"بالکل درست جوڑ",zh:"精確匹配","zh-cn":"精确匹配","zh-hans":"精确匹配","zh-hant":"精確匹配"},SHORT:"exact",uri:"http://www.w3.org/2004/02/skos/core#exactMatch"},{RELEVANCE:"high",broader:[{uri:"http://www.w3.org/2004/02/skos/core#mappingRelation"}],definition:{de:["in etwa gleiche Bedeutung"],en:["same general idea but not fully identical meaning"]},notation:["≈"],prefLabel:{ar:"تطابق قريب","be-tarask":"блізкая адпаведнасьць",ca:"equivalència inexacta",de:"hohe Übereinstimmung",el:"στενή αντιστοιχία",en:"close match",eo:"proksima kongruaĵo",es:"equivalencia inexacta",fi:"lähes vastaava käsite",fr:"quasi-équivalence",he:"התאמה קרובה",hu:"kvázi-egyenértékűség",it:"corrispondenza parziale",ja:"類似一致",mk:"блиско совпаѓање",ms:"padanan dekat","ms-arab":"ڤادنن دکت",nb:"nært samsvar",nl:"nabije match",nn:"nært samsvar",pl:"częściowe dopasowanie",pt:"correspondência próxima",ru:"близкое соответствие",sl:"visoko ujemanje",sr:"блиско поклапање",sv:"nära matchning",tr:"yakın eşleşme","zh-hans":"高度匹配"},SHORT:"close",uri:"http://www.w3.org/2004/02/skos/core#closeMatch"},{RELEVANCE:"medium",broader:[{uri:"http://www.w3.org/2004/02/skos/core#mappingRelation"}],definition:{de:["umfassendere Bedeutung"],en:["broader meaning"]},notation:[">"],prefLabel:{"be-tarask":"шырокая адпаведнасьць",ca:"relació llunyana",cs:"širší koncept",de:"allgemeinere Bedeutung",en:"broad match",eo:"malstrikta kongruo",et:"laiem vaste",fi:"vastaava laajempi käsite",he:"התאמה רחבה",hu:"tágabb jelentés",it:"corrispondenza con termine più generico",ja:"広義一致",mk:"пошироко совпаѓање",nb:"bredere samsvar",nl:"brede match",nn:"breitt samsvar",pl:"dopasowanie pojęcia o szerszym znaczeniu","pt-br":"correspondência genérica",ru:"более широкое соответствие",sl:"splošni pomen",sr:"у ширем смислу",sv:"bred träff",uk:"ширша відповідність",vi:"đối sánh rộng","zh-hans":"广泛匹配"},related:[{uri:"http://www.w3.org/2004/02/skos/core#narrowMatch"}],SHORT:"broad",uri:"http://www.w3.org/2004/02/skos/core#broadMatch"},{RELEVANCE:"medium",broader:[{uri:"http://www.w3.org/2004/02/skos/core#mappingRelation"}],definition:{en:["more specific meaning"]},notation:["<"],prefLabel:{"be-tarask":"вузкая адпаведнасьць",ca:"relació estreta",de:"spezifischere Bedeutung",en:"narrow match",eo:"strikta kongruo",et:"kitsam vaste",fi:"vastaava suppeampi käsite",he:"התאמה צרה",hu:"szűkebb jelentés",it:"corrispondenza con termine più specifico",ja:"狭義一致",mk:"потесно совпаѓање",nb:"smalere samsvar",nl:"nauwe match",nn:"snevert samsvar",pl:"dopasowanie pojęcia o węższym znaczeniu","pt-br":"correspondência aproximada",ru:"более узкое соответствие",sl:"ozki pomen",sr:"у ужем смислу",sv:"smal träff",ur:"نیرو میچ",vi:"đối sánh hẹp","zh-hans":"有限匹配"},related:[{uri:"http://www.w3.org/2004/02/skos/core#broadMatch"}],SHORT:"narrow",uri:"http://www.w3.org/2004/02/skos/core#narrowMatch"},{RELEVANCE:"low",broader:[{uri:"http://www.w3.org/2004/02/skos/core#mappingRelation"}],definition:{de:["assoziative Verknüpfung unterschiedlicher Bedeutungen"],en:["associative link between meanings"]},notation:["~"],prefLabel:{"be-tarask":"зьвязаная адпаведнасьць",ca:"parella relacionada",de:"verwandte Bedeutung",en:"related match",eo:"rilata kongruo",fi:"liittyvä käsite",fr:"association",he:"התאמה קשורה",hu:"rokon jelentés",it:"corrispondenza correlata",ja:"関連一致",lv:"saistīta sakritība",mk:"поврзано совпаѓање",ms:"padanan berkaitan","ms-arab":"ڤادنن برکاءيتن",nb:"relatert samsvar",nl:"gerelateerde match",pl:"dopasowanie pojęcia o powiązanym znaczeniu",ru:"ассоциативное соответствие",sl:"povezano ujemanje",tr:"ilişkili benzeşme",uk:"пов’язь",ur:"متعلقہ میچ",vec:"parenteła rełasionada","zh-hans":"关联匹配"},SHORT:"related",uri:"http://www.w3.org/2004/02/skos/core#relatedMatch"},{RELEVANCE:"generic",definition:{de:["unbekannter Bedeutungszusammenhang"],en:["unknown type of link between meanings"]},notation:["→"],prefLabel:{ar:"نوع علاقة التطبيق",be:"характэрная адносіна адлюстравання","be-tarask":"характэрная адносіна адлюстраваньня",ca:"relació de mapatge",de:"allgemeine Mapping-Relation",en:"SKOS generic mapping relation",fi:"SKOS-kartoitussuhde",fr:"lien de correspondance SKOS",he:"יחס מיפוי כללי",id:"relasi pemetaan",ja:"SKOS一般マッピング関係",mk:"пресликувачки однос",nb:"SKOS generisk mappingrelasjon","pt-br":"relação genérica de mapeamento",sl:"splošna relacija kartiranja SKOS",sr:"релација мапирања",sv:"mappnings relation",zh:"映射關係","zh-hant":"映射關係"},SHORT:"",uri:"http://www.w3.org/2004/02/skos/core#mappingRelation"}];const T={Concept:{type:["http://www.w3.org/2004/02/skos/core#Concept"]},ConceptScheme:{type:["http://www.w3.org/2004/02/skos/core#ConceptScheme"]},ConceptMapping:{type:j.map(e=>e.uri)},ConceptOccurrence:{type:["http://purl.org/cld/cdtype/CatalogueOrIndex"]},Registry:{type:["http://www.w3.org/ns/dcat#Catalog"]},Distribution:{type:["http://www.w3.org/ns/dcat#Distribution"]},Concordance:{type:["http://rdfs.org/ns/void#Linkset","http://rdf-vocabulary.ddialliance.org/xkos#Correspondence"]},Resource:{},Item:{},ConceptBundle:{},Annotation:{type:["Annotation","http://www.w3.org/ns/oa#Annotation"]}},U=Object.keys(T).reduce((e,t)=>{for(let r of T[t].type||[])e[r]=t;return e},{});function ie(e,t=!1){var r;if(typeof e=="string"&&e)e in U?r=U[e]:(e=e.toLowerCase().replace(/s$/,""),r=Object.keys(T).find(i=>{const n=i.toLowerCase();if(n===e||n==="concept"+e)return!0}));else if(typeof e=="object"&&e.type){let i=Array.isArray(e.type)?e.type:[e.type];for(let n of i)if(n in U){r=U[n];break}}return t&&r?r.toLowerCase().replace(/^concept(.+)/,"$1"):r}const De=/[\\^$.*+?()[\]{}|]/g,Ve=e=>e.replace(De,"\\$&"),qe=/[%ÄÖÜäöü ]/g;class X{constructor(t={}){if(Object.assign(this,t),this.notationPattern||(this.notationPattern=".+"),!this.uriPattern&&this.namespace){this.uriPattern="^"+Ve(this.namespace);const r=this.notationPattern.replace(qe,encodeURI);this.uriPattern+="("+r+")$"}this.NOTATION_REGEX=RegExp("^("+this.notationPattern+")$"),this.uriPattern&&(this.URI_REGEX=RegExp(this.uriPattern))}isValidNotation(t){return this.NOTATION_REGEX.exec(t)}notationFromUri(t){if(this.URI_REGEX){const r=this.URI_REGEX.exec(t);if(r)return decodeURI(r[1])}}uriFromNotation(t){if(this.uriPattern)return t=encodeURIComponent(t),this.uriPattern.replace(/^\^|\$$/g,"").replace(/\\/g,"").replace(/\(.*\)/,t)}conceptFromUri(t,r={}){const i=this.notationFromUri(t);if(i===void 0)return;const n={uri:t,notation:[i]};return r.inScheme&&(n.inScheme=[{uri:this.uri}]),r.topConcept&&(n.topConceptOf=[{uri:this.uri}]),n}conceptFromNotation(t,r){if(this.isValidNotation(t))return this.conceptFromUri(this.uriFromNotation(t),r)}}const z={store:null,path:"",defaults:["en"],getLanguages:ue,selectLanguage:He};function ue(){return l(z.store,z.path)||z.defaults}function He(e){if(!e)return null;for(let t of ue())if(e[t])return t;for(let t of Object.keys(e))if(t!="-")return t;return null}const Ze=e=>/^[A-Z]*$/.test(e),O=(e,t)=>t.split(".").reduce((r,i)=>r&&r[i]?r[i]:null,e),le=e=>((e instanceof Array?e:[e]).forEach(r=>{r["@context"]="https://gbv.github.io/jskos/context.json"}),e),D=e=>(Object.keys(e).forEach(t=>{Ze(t)||t.startsWith("_")?delete e[t]:e[t]!=null&&typeof e[t]=="object"&&(e[t]=D(e[t]))}),e),pe=D,L=(e,t=[],r=!0)=>{t=t.concat(["ancestors","narrower","broader","mappings","memberList","TOPCONCEPTS","MAPPINGS","PROVIDER"]);let i=Array.isArray(e)?[]:{};for(let n in e)if(!(r&&n[0]=="_")){if(t.includes(n))if(e[n]&&Array.isArray(e[n])){e[n].length>0?i[n]=[null]:i[n]=[];continue}else{i[n]=null;continue}if(n=="inScheme"){let o=[];for(let a of e.inScheme){let c={uri:a.uri};a.notation&&(c.notation=a.notation),a.prefLabel&&(c.prefLabel=a.prefLabel),o.push(c)}i.inScheme=o;continue}e[n]!=null&&typeof e[n]=="object"?i[n]=L(e[n]):i[n]=e[n]}return i},me=L,I=e=>e?(e.uri?[e.uri]:[]).concat(e.identifier||[]).filter(Boolean):[],C=(e,t)=>{if(e==null&&t==null)return!0;const r=n=>n.replace("http://").replace("https://"),i=I(e).map(r);for(let n of I(t).map(r))if(i.indexOf(n)!==-1)return!0;return!1},he=C,de=C,ge=C,we=e=>l(e,"type",[]).includes("http://www.w3.org/2004/02/skos/core#Concept")||l(e,"inScheme")!=null||l(e,"topConceptOf")!=null,J=e=>l(e,"type",[]).includes("http://www.w3.org/2004/02/skos/core#ConceptScheme"),Q=(e,t)=>{if(!e||!t)return!1;for(let r of t)if(C(e,r))return!0;return!1},ye=Q,Ae=(e,t=!1)=>e.sort((r,i)=>{let n=l(r,"notation[0]"),o=l(i,"notation[0]");if(n&&o&&(n=n.toLowerCase(),o=o.toLowerCase()),t&&n&&o){let a,c;if(a=parseFloat(n),c=parseFloat(o),!a&&!c){const f=`${n}`.split(/[^\w\d]/),u=`${o}`.split(/[^\w\d]/);for(let s=0;s<Math.min(f.length,u.length);s+=1)if(f[s]!==u[s]){a=parseFloat(f[s])||f[s],c=parseFloat(u[s])||u[s];break}!a&&!c&&(a=n,c=o)}n=a,o=c}if((!n||!o||n==o)&&(n=r.uri,o=i.uri),n&&o){if(n>o)return 1;if(n<o)return-1}return 0}),Ce=e=>{let t=["notation[0]",["prefLabel.de","prefLabel.en"],"uri"];return e.sort((r,i)=>{for(let n of t){let o,a;if(Array.isArray(n))for(let c of n)o=o||l(r,c),a=a||l(i,c);else o=l(r,n),a=l(i,n);if(o!=null&&a!=null){if(o=o.toLowerCase(),a=a.toLowerCase(),o>a)return 1;if(o<a)return-1}}return 0})},Se=e=>{let t=M(L(e),["from","to","fromScheme","toScheme","creator","contributor","type","created","modified","note","identifier","uri","partOf","mappingRelevance"]);for(let r of[t.from,t.to])N(r,(i,n)=>{let o=[];for(let a of i)o.push(M(a,["uri","notation"]));r[n]=o});return t.fromScheme&&(t.fromScheme=M(t.fromScheme,["uri","notation"])),t.toScheme&&(t.toScheme=M(t.toScheme,["uri","notation"])),t.partOf&&(t.partOf=t.partOf.map(r=>M(r,["uri"]))),t},x=function(e){for(let t of j)if(e==t.uri)return t;return null},Y=x("http://www.w3.org/2004/02/skos/core#mappingRelation"),be=function(e,t=Y){let r;return Array.isArray(e)&&e.length>0?r=e[0]:r=e,x(r)||t},ve=(e,t={})=>{const{language:r}=t;let i=O(e,"from.memberSet.0.notation.0"),n=O(e,"to.memberSet.0.notation.0");i=i!==null?i:"",n=n!==null?n:"";let o=x(O(e,"type.0"));o=o?o.SHORT:"";let a=v(O(e,"from.memberSet.0"),{language:r,fallbackToUri:!1})||"",c=v(O(e,"to.memberSet.0"),{language:r,fallbackToUri:!1})||"",f=v(O(e,"creator.0"),{language:r,fallbackToUri:!1})||"";return{fromNotation:i,toNotation:n,fromLabel:a,toLabel:c,type:o,creator:f}},Ke=(e={})=>{const t=e.delimiter||",",r=e.quoteChar||'"',i=e.lineTerminator||`
`,n=r+r,o=a=>r+(a==null?"":a.split(r).join(n))+r;return a=>a.map(o).join(t)+i},b=(e,t)=>{let r=[];for(let i of["from","to"])(t==null||i===t)&&(r=r.concat(l(e,`${i}.memberSet`)||l(e,`${i}.memberChoice`)||l(e,`${i}.memberList`)||[]));return r.filter(i=>i!=null)},ke=(e={})=>{const t=Ke(e),r=e.language||"en";e.type==null&&(e.type=!0);const i=a=>{a=a||[];let c=[];for(let f of["from","to"]){e.schemes&&c.push(`${f}Scheme`);let u=Math.max(...a.map(s=>b(s,f).length),1);for(let s=0;s<u;s+=1)c.push(`${f}Notation${s?s+1:""}`),e.labels&&c.push(`${f}Label${s?s+1:""}`)}return e.type&&c.push("type"),e.creator&&c.push("creator"),t(c)},n=(a,c={})=>{let f=[];for(let u of["from","to"]){e.schemes&&f.push(l(a,`${u}Scheme.notation[0]`,""));const s=b(a,u);let g=c[`${u}Count`];g==null&&(g=s.length),g=Math.max(g,1);for(let h=0;h<g;h+=1)f.push(l(s[h],"notation[0]","")),e.labels&&f.push(v(s[h],{language:r,fallbackToUri:!1}))}return e.type&&f.push(l(x(l(a,"type[0]")),"SHORT","")),e.creator&&f.push(v(l(a,"creator[0]"),{language:r,fallbackToUri:!1})),t(f)};return{header:i,fromMapping:n,fromMappings:(a,c={header:!0})=>{let f="";c.header&&(f+=i(a));const u={fromCount:Math.max(...a.map(s=>b(s,"from").length)),toCount:Math.max(...a.map(s=>b(s,"to").length))};for(let s of a)f+=n(s,u);return f}}};function Oe(e,t){return E(e,t,(r,i,n)=>{let o={[n]:r},a={[n]:i};if(n=="from"||n=="to")return E(Object.getOwnPropertyNames(l(r,n,{})),Object.getOwnPropertyNames(l(i,n,{})))?E(b(o,n),b(a,n),(c,f,u)=>{if(u!=null)return C(c,f)}):!1;if(n=="fromScheme"||n=="toScheme")return C(r,i)})}const ze=(e,t)=>{let r=ie(e),i=ie(t);return!(r&&i&&r!=i)},xe=e=>{Array.isArray(e)&&e.sort((t,r)=>t===null?1:r===null?-1:0)},ee=(e,t)=>(!e||!t||((Array.isArray(e.identifier)||Array.isArray(t.identifier))&&(e.identifier=Be(e.identifier||[],t.identifier||[])),!e.uri&&t.uri&&(e.uri=t.uri),e.uri&&t.uri&&e.uri!=t.uri&&!(e.identifier||[]).includes(t.uri)&&(e.identifier=(e.identifier||[]).concat([t.uri])),Array.isArray(e.identifier)&&e.uri&&(e.identifier=e.identifier.filter(r=>r!==e.uri)),(e.identifier||[]).length==0&&delete e.identifier,xe(e.identifier)),e),te=(e,t,r)=>{if(!e||!t)return e||t;r=r||{};let i=r._path||"",n=r.detectMismatch||[],o=r.skipPaths||[],a={};return N(e,(c,f)=>{if(!o.includes(i+f))if(Array.isArray(c)&&Array.isArray(t[f]))a[f]=Pe(c,t[f],(u,s)=>_(u)&&_(s)?C(u,s):u===s),xe(a[f]);else if(_(c)&&_(t[f]))a[f]=te(c,t[f],Object.assign({_path:`${i}${f}.`},r));else{if(c&&t[f]&&n.includes(i+f)&&!E(c,t[f]))throw new Error("Property mismatch in "+i+f);a[f]=c}}),N(t,(c,f)=>{e[f]||(a[f]=c)}),i==""&&je(a,o),r.mergeUris&&ee(a,t),a},B=e=>Array.isArray(e)?e.map(t=>B(t)):_(e)?(N(e,(t,r)=>{e[r]=B(t)}),e):P(e)?e.normalize():e,Fe=e=>{var t=/^[A-Za-z][A-Za-z0-9+\-.]*:(?:\/\/(?:(?:[A-Za-z0-9\-._~!$&'()*+,;=:]|%[0-9A-Fa-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9A-Fa-f]{1,4}:){6}|::(?:[0-9A-Fa-f]{1,4}:){5}|(?:[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,1}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){3}|(?:(?:[0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){2}|(?:(?:[0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}:|(?:(?:[0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})?::)(?:[0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{1,4}|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)|[Vv][0-9A-Fa-f]+\.[A-Za-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:[A-Za-z0-9\-._~!$&'()*+,;=]|%[0-9A-Fa-f]{2})*)(?::[0-9]*)?(?:\/(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|\/(?:(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\/(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)?|(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\/(?:[A-Za-z0-9\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|)(?:\?(?:[A-Za-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9A-Fa-f]{2})*)?(?:#(?:[A-Za-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9A-Fa-f]{2})*)?$/;return e.match(t)!==null},Me={mappingsByConcepts:(e,t,r)=>{let i=["memberSet","memberList","memberChoice"],n,o;for(let a of i)n=n||l(e,r+"."+a+"[0].notation[0]"),o=o||l(t,r+"."+a+"[0].notation[0]");return n==null||n<o?-1:o==null||n>o?1:0}},_e=(e,t)=>!e||!t?!1:[e.uri].concat(Object.values(e.identities||{}).map(r=>r.uri)).filter(r=>r!=null).includes(l(t,"creator[0].uri"));function Ee(e,t){let r;if(e&&e.notation&&e.notation.length)r=e.notation[0],(J(e)||t=="scheme")&&(r=r.toUpperCase());else if(e&&e.inScheme&&e.inScheme[0]&&e.uri)try{r=new X(e&&e.inScheme&&e.inScheme[0]).notationFromUri(e.uri)}catch{}return r||""}function V(e,t,{language:r}={}){let i=e&&t?e[t]:e;return i&&(i[r]||(r=z.selectLanguage(i),r))?i[r]:null}function v(e,t={}){t=t||{};const r=t.fallbackToUri==null?!0:t.fallbackToUri;return l(e,`prefLabel.${t.language}`)||V(e,"prefLabel",t)||(r&&e&&e.uri?e.uri:"")}function Te(e,t={}){t=t||{};let r=l(e,`definition.${t.language}`)||V(e,"definition",t)||[];return P(r)&&(r=[r]),r}function Le(e){return l(e,"stored",l(e,"constructor.stored",l(e,"provider.constructor.stored",!1)))}function Re(e){return P(e.creator)?e.creator:e.creator&&e.creator.id}function Ue(e){return l(e,"creator.name")||""}function $e(e,t){return!!(e&&P(e.creator)?t&&t.includes(e.creator):t&&e.creator&&t.includes(e.creator.id))}function Ne(e,t){return t.filter(({notationPattern:r})=>(r||".+")===".+"?!1:RegExp("^("+r+")$").test(e))}var We=Object.freeze({__proto__:null,addContext:le,annotationCreatorMatches:$e,annotationCreatorName:Ue,annotationCreatorUri:Re,clean:D,cleanJSKOS:pe,compare:C,compareConcepts:ge,compareFunctions:Me,compareMappingsDeep:Oe,compareObjects:he,compareSchemes:de,conceptsOfMapping:b,copyDeep:L,deepCopy:me,defaultMappingType:Y,definition:Te,flattenMapping:ve,getAllUris:I,guessSchemeFromNotation:Ne,isConcept:we,isContainedIn:Q,isScheme:J,isSchemeInList:ye,isValidUri:Fe,languageMapContent:V,mappingCSV:ke,mappingRegistryIsStored:Le,mappingTypeByType:be,mappingTypeByUri:x,mappingTypes:j,matchObjectTypes:ze,merge:te,mergeUris:ee,minifyMapping:Se,normalize:B,notation:Ee,objectTypes:T,prefLabel:v,sortConcepts:Ae,sortSchemes:Ce,userOwnsMapping:_e}),Ge={...Ie,...We,ConceptScheme:X,languagePreference:z};const Xe=Object.freeze(Object.defineProperty({__proto__:null,ConceptScheme:X,addContext:le,addMappingIdentifiers:$,annotationCreatorMatches:$e,annotationCreatorName:Ue,annotationCreatorUri:Re,clean:D,cleanJSKOS:pe,compare:C,compareConcepts:ge,compareFunctions:Me,compareMappingContent:fe,compareMappingMembers:ce,compareMappings:G,compareMappingsDeep:Oe,compareObjects:he,compareSchemes:de,conceptsOfMapping:b,copyDeep:L,deepCopy:me,default:Ge,defaultMappingType:Y,definition:Te,flattenMapping:ve,getAllUris:I,guessSchemeFromNotation:Ne,isConcept:we,isContainedIn:Q,isScheme:J,isSchemeInList:ye,isValidUri:Fe,languageMapContent:V,languagePreference:z,mappingCSV:ke,mappingContent:H,mappingContentIdentifier:K,mappingMembers:Z,mappingMembersIdentifier:W,mappingRegistryIsStored:Le,mappingTypeByType:be,mappingTypeByUri:x,mappingTypes:j,matchObjectTypes:ze,merge:te,mergeUris:ee,minifyMapping:Se,normalize:B,notation:Ee,objectTypes:T,prefLabel:v,sortConcepts:Ae,sortSchemes:Ce,userOwnsMapping:_e},Symbol.toStringTag,{value:"Module"}));export{we as a,C as c,Ge as i,Xe as j,z as l,Ee as n,v as p,Ae as s};
