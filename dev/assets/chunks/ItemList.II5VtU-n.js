import{_ as I,d as h,o as m,c as u,F as b,E as $,n as k,P as B,$ as f,r as p,b as c,M as v,D as y}from"./framework.DOrQYd6A.js";import{I as w}from"./ItemName.BXFfuZjO.js";import{L as T}from"./LoadingIndicator.BIFdSjTT.js";import{V as O}from"./vue-scrollto.FOkUA__D.js";import{b as j}from"./utils.Cs71LNG2.js";import"./shared.l0sNRNKZ.js";const{dragstart:C,dragend:L}=j,M=h({name:"ItemList",components:{ItemName:w,LoadingIndicator:T},props:{items:{type:Array,required:!0},itemProperty:{type:String,default:null},rowMode:{type:Boolean,default:!0},draggable:{type:Boolean,default:!0},indent:{type:Boolean,default:!1},itemNameOptions:{type:Object,default:()=>({})},indicatorByUri:{type:Object,default:()=>({})},highlightByUri:{type:Object,default:()=>({})}},emits:["select"],data(){return{dragstart:C,dragend:L}},computed:{itemNameOptions_(){return Object.assign({draggable:this.draggable},this.itemNameOptions||{})}},methods:{styleForItem(e,i){let o={},s=this.indicatorByUri[e&&e.uri];s||(s="transparent"),s!==!0&&(o["--jskos-vue-itemList-indicator-color"]=s);let t=this.highlightByUri[e&&e.uri];return t?o["background-color"]=t===!0?"var(--jskos-vue-conceptTree-selected-bgColor)":t:t="transparent",this.indent&&(o["padding-left"]=`${(i+1)*5}px`),o},getItem(e){return this.itemProperty?e[this.itemProperty]:e},isUriInView(e,i=60){const o=this.$el,s=o.querySelectorAll(`[data-uri='${e}']`)[0];if(!o||!s)return!1;let t=o.scrollTop,l=t+o.clientHeight,n=s.offsetTop-o.offsetTop,a=n+s.clientHeight,r=n>=t&&a<=l,d;return i===!0?d=n<t&&a>t||a>l&&n<l:typeof i=="number"&&(n<t&&a>t?d=(a-t)*100/s.clientHeight>i:a>l&&n<l&&(d=(l-n)*100/s.clientHeight>i)),!!(r||i&&d)},scrollToUri(e,i=!1){if(i&&this.isUriInView(e))return;const o=this.$el,s=o.querySelectorAll(`[data-uri='${e}']`)[0],t={container:o,easing:"ease-in",offset:-15,cancelable:!0,x:!1,y:!0};s&&O.scrollTo(s,200,t)}}}),U={class:"jskos-vue-itemList"},N=["data-uri","draggable","onDragstart","onClick"];function P(e,i,o,s,t,l){const n=y("item-name"),a=y("loading-indicator");return m(),u("div",U,[(m(!0),u(b,null,$(e.items,(r,d)=>(m(),u("div",{key:e.getItem(r)&&e.getItem(r).uri,class:k({"jskos-vue-itemList-row":e.rowMode}),style:B(e.styleForItem(e.getItem(r),d)),"data-uri":e.getItem(r)&&e.getItem(r).uri,draggable:e.rowMode&&e.draggable&&!!e.getItem(r),onDragstart:g=>e.dragstart(e.getItem(r)),onDragend:i[0]||(i[0]=(...g)=>e.dragend&&e.dragend(...g)),onClick:f(g=>e.rowMode&&e.$emit("select",{item:e.getItem(r),row:!0}),["stop"])},[p(e.$slots,"beforeItem",{item:r}),e.getItem(r)?(m(),c(n,v({key:0,ref_for:!0},e.itemNameOptions_,{item:e.getItem(r),draggable:e.itemNameOptions_.draggable!==!1&&!e.rowMode,onClick:f(g=>e.$emit("select",{item:e.getItem(r),row:!1}),["stop"])}),null,16,["item","draggable","onClick"])):(m(),c(a,{key:1,style:{"align-self":"center"}})),p(e.$slots,"afterItem",{item:r})],46,N))),128))])}const q=I(M,[["render",P]]);export{q as I};
