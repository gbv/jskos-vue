import{_ as I,d as b,B as p,o as m,c as f,r as g,F as h,C as k,n as $,N as v,Z as c,b as y,K as w}from"./framework.eEdxNogO.js";import{I as B}from"./ItemName.CkN2MC0N.js";import{L}from"./LoadingIndicator.CvdATm6-.js";import{V as j}from"./vue-scrollto.FOkUA__D.js";import{b as T}from"./utils.DojUxO_u.js";/* empty css               */const{dragstart:C,dragend:O}=T,M=b({name:"ItemList",components:{ItemName:B,LoadingIndicator:L},props:{items:{type:Array,required:!0},itemProperty:{type:String,default:null},rowMode:{type:Boolean,default:!0},draggable:{type:Boolean,default:!0},indent:{type:Boolean,default:!1},itemNameOptions:{type:Object,default:()=>({})},indicatorByUri:{type:Object,default:()=>({})},highlightByUri:{type:Object,default:()=>({})}},emits:["select"],data(){return{dragstart:C,dragend:O}},computed:{itemNameOptions_(){return Object.assign({draggable:this.draggable},this.itemNameOptions||{})}},methods:{styleForItem(e,i){let o={},s=this.indicatorByUri[e&&e.uri];s||(s="transparent"),s!==!0&&(o["--jskos-vue-itemList-indicator-color"]=s);let r=this.highlightByUri[e&&e.uri];return r?o["background-color"]=r===!0?"var(--jskos-vue-conceptTree-selected-bgColor)":r:r="transparent",this.indent&&(o["padding-left"]=`${(i+1)*5}px`),o},getItem(e){return this.itemProperty?e[this.itemProperty]:e},isUriInView(e,i=60){const o=this.$el,s=o.querySelectorAll(`[data-uri='${e}']`)[0];if(!o||!s)return!1;let r=o.scrollTop,l=r+o.clientHeight,n=s.offsetTop-o.offsetTop,a=n+s.clientHeight,t=n>=r&&a<=l,d;return i===!0?d=n<r&&a>r||a>l&&n<l:typeof i=="number"&&(n<r&&a>r?d=(a-r)*100/s.clientHeight>i:a>l&&n<l&&(d=(l-n)*100/s.clientHeight>i)),!!(t||i&&d)},scrollToUri(e,i=!1){if(i&&this.isUriInView(e))return;const o=this.$el,s=o.querySelectorAll(`[data-uri='${e}']`)[0],r={container:o,easing:"ease-in",offset:-15,cancelable:!0,x:!1,y:!0};s&&j.scrollTo(s,200,r)}}}),N={class:"jskos-vue-itemList"},U=["data-uri","draggable","onDragstart","onClick"];function S(e,i,o,s,r,l){const n=p("item-name"),a=p("loading-indicator");return m(),f("div",N,[g(e.$slots,"beforeList",{},void 0,!0),(m(!0),f(h,null,k(e.items,(t,d)=>(m(),f("div",{key:e.getItem(t)&&e.getItem(t).uri,class:$({"jskos-vue-itemList-item":!0,"jskos-vue-itemList-row":e.rowMode,"jskos-vue-itemList-row-selectable":e.rowMode&&!!e.getItem(t)}),style:v(e.styleForItem(e.getItem(t),d)),"data-uri":e.getItem(t)&&e.getItem(t).uri,draggable:e.rowMode&&e.draggable&&!!e.getItem(t),onDragstart:u=>e.dragstart(e.getItem(t)),onDragend:i[0]||(i[0]=(...u)=>e.dragend&&e.dragend(...u)),onClick:c(u=>e.rowMode&&e.getItem(t)&&e.$emit("select",{item:e.getItem(t),row:!0}),["stop"])},[g(e.$slots,"beforeItem",{item:t},void 0,!0),e.getItem(t)?(m(),y(n,w({key:0,ref_for:!0},e.itemNameOptions_,{item:e.getItem(t),draggable:e.itemNameOptions_.draggable!==!1&&!e.rowMode,onClick:c(u=>e.$emit("select",{item:e.getItem(t),row:!1}),["stop"])}),null,16,["item","draggable","onClick"])):(m(),y(a,{key:1,style:{"align-self":"center"}})),g(e.$slots,"afterItem",{item:t},void 0,!0)],46,U))),128)),g(e.$slots,"afterList",{},void 0,!0)])}const q=I(M,[["render",S],["__scopeId","data-v-b7191cb9"]]);export{q as I};
