import{_ as N,d as $,C as O,c as u,o as y,ag as I,ah as z,j as C,X as q,Z as _,ai as x,G as v,e as K,F as W,B as H,n as U,q as Q,p as l,P as G,v as J,ae as B}from"./chunks/framework.bu42XqqY.js";import{L as X}from"./chunks/LoadingIndicator.GuFy7ToJ.js";import{V as Y}from"./chunks/vue-scrollto.DDOJiwre.js";import{a as Z,u as ss,d as is,b as P}from"./chunks/utils.yHVIljV5.js";/* empty css                      */import{c as V}from"./chunks/index.l5vM-O7T.js";import"./chunks/index.cW5vb7Er.js";const{t:as}=ss({en:{placeholder:"Type to search..."},de:{placeholder:"Tippen zum Suchen..."}});function D(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}const ts=$({name:"ItemSuggest",components:{LoadingIndicator:X},props:{search:{type:Function,default:null},placeholder:{type:String,default:null}},emits:["select"],setup(i,{emit:t}){const E=l(!1),d=l(!1),g=l(null),r=l(""),n=l(-1),s=l([]),k="abc",h=l(!1),S=l(null),f=l(null),w=l(null),L=is(async a=>{a=a.trim(),s.value=[],E.value=!0;const p=i.search(a);g.value=p.cancel;let o;try{o=(await p).slice(1).reduce((e,F)=>(e=F.map((m,c)=>(e[c]||[]).concat(m)),e),[])}catch(e){if(e.message==="canceled")return;console.error(e),o=[]}a===r.value.trim()&&(s.value=o,g.value=null,E.value=!1)},200);Q(r,a=>{n.value=-1,g.value!=null&&(g.value("There was a newer search query."),g.value=null),a===""?(E.value=!1,d.value=!1):(s.value=["Waiting for you to stop typing..."],E.value=!0,d.value=!0,L(a))});const M=()=>{d.value=r.value!==""},A=()=>{d.value=!1},T=a=>{A(),n.value=-1,t("select",{uri:s.value[a][2]}),document.activeElement!==document.body&&document.activeElement.blur()},j=a=>{if(!r.value.length)return a;const p=r.value,o=new RegExp(p,"ig");let e=o.exec(a),F=0,m="";for(;e;){let c=e.index;m+=D(a.slice(F,c))+"<span class='jskos-vue-text-bold'>"+D(a.slice(c,c+p.length))+"</span>",F=c+p.length,e=o.exec(a)}return m+=D(a.slice(F)),m},R=()=>{const a=w.value.childNodes[n.value+1];if(a){const p=a.parentElement.parentElement,o=a.getBoundingClientRect(),e=p.getBoundingClientRect();Y.scrollTo(a,100,{container:p,easing:"ease-in",offset:o.bottom>e.bottom?-e.height+o.height:0,cancelable:!0,x:!1,y:!0,force:!1})}};return Z(()=>[{elements:[S.value],handler:()=>{d.value=!1,n.value=-1}}]),{t:as,isLoading:E,isOpen:d,query:r,searchSelected:n,results:s,uniqueID:k,openResults:M,closeResults:A,chooseResult:T,itemSuggest:S,searchInput:f,resultList:w,mouseover(a){h.value||(n.value=a)},mousemove(){h.value=!1},onArrowDown(){h.value=!0,n.value>=s.value.length-1?n.value=0:n.value+=1,R()},onArrowUp(){h.value=!0,n.value<=0?n.value=s.value.length-1:n.value-=1,R()},onEnter(){let a;E.value||s.value.length===0||(n.value<0||n.value>=s.value.length?a=0:a=n.value,T(a))},highlightQueryInResult:j,focus(){f.value.focus()},setQuery(a,p=!1){r.value=a,p?f.value.focus():G(()=>{A()})}}}}),ns=["placeholder"],es={class:"jskos-vue-itemSuggest-results jskos-vue-text-small"},hs={key:0,class:"jskos-vue-itemSuggest-loading"},ls={key:1,ref:"resultList",class:"jskos-vue-itemSuggest-results-list"},ks=["onClick","onMouseover"],ps=["innerHTML"],Es={key:0,class:"jskos-vue-itemSuggest-results-item"};function rs(i,t,E,d,g,r){const n=O("loading-indicator");return y(),u("div",{ref:"itemSuggest",class:"jskos-vue-itemSuggest",onMousemove:t[7]||(t[7]=(...s)=>i.mousemove&&i.mousemove(...s))},[I(C("input",{ref:"searchInput","onUpdate:modelValue":t[0]||(t[0]=s=>i.query=s),type:"search",placeholder:i.placeholder===null?i.t("placeholder"):i.placeholder,onClick:t[1]||(t[1]=(...s)=>i.openResults&&i.openResults(...s)),onKeydown:[t[2]||(t[2]=q(_((...s)=>i.onArrowDown&&i.onArrowDown(...s),["prevent"]),["down"])),t[3]||(t[3]=q(_((...s)=>i.onArrowUp&&i.onArrowUp(...s),["prevent"]),["up"]))],onKeyup:[t[4]||(t[4]=q((...s)=>i.onEnter&&i.onEnter(...s),["enter"])),t[5]||(t[5]=q(s=>{i.$refs&&i.$refs.searchInput&&i.$refs.searchInput.blur(),i.closeResults()},["esc"]))],onFocus:t[6]||(t[6]=(...s)=>i.openResults&&i.openResults(...s))},null,40,ns),[[z,i.query]]),I(C("div",es,[i.isLoading?(y(),u("div",hs,[v(n,{size:"md"})])):(y(),u("ul",ls,[(y(!0),u(W,null,H(i.results,(s,k)=>(y(),u("li",{key:k,class:U([{"jskos-vue-itemSuggest-selected":k===i.searchSelected},"jskos-vue-itemSuggest-results-item"]),onClick:h=>i.chooseResult(k),onMouseover:h=>i.mouseover(k)},[C("span",{innerHTML:i.highlightQueryInResult(s[0])},null,8,ps)],42,ks))),128)),i.results.length==0?(y(),u("li",Es,[...t[8]||(t[8]=[C("div",null,"No results",-1)])])):K("",!0)],512))],512),[[x,i.isOpen]])],544)}const b=N(ts,[["render",rs],["__scopeId","data-v-9d7d3541"]]),Cs=JSON.parse('{"title":"ItemSuggest","description":"","frontmatter":{},"headers":[],"relativePath":"components/ItemSuggest.md","filePath":"components/ItemSuggest.md"}'),ds={name:"components/ItemSuggest.md"},qs=Object.assign(ds,{setup(i){const t=l(null),E=l(null);J(()=>{t.value=V.initializeRegistry({provider:"ConceptApi",api:"https://coli-conc.gbv.de/api/"}),E.value=V.initializeRegistry({provider:"ConceptApi",api:"https://bartoc.org/api/"})});const d={uri:"http://dewey.info/scheme/edition/e23/",license:[{uri:"http://creativecommons.org/licenses/by-nc-nd/3.0/"}]},g=[{id:1,name:"Bulbasaur"},{id:2,name:"Ivysaur"},{id:3,name:"Venusaur"},{id:4,name:"Charmander"},{id:5,name:"Charmeleon"},{id:6,name:"Charizard"},{id:7,name:"Squirtle"},{id:8,name:"Wartortle"},{id:9,name:"Blastoise"},{id:10,name:"Caterpie"},{id:11,name:"Metapod"},{id:12,name:"Butterfree"},{id:13,name:"Weedle"},{id:14,name:"Kakuna"},{id:15,name:"Beedrill"},{id:16,name:"Pidgey"},{id:17,name:"Pidgeotto"},{id:18,name:"Pidgeot"},{id:19,name:"Rattata"},{id:20,name:"Raticate"}],r=async n=>{n=n.toLowerCase();const s=g.filter(h=>h.name.toLowerCase().includes(n)),k=[n];return k[1]=s.map(h=>h.name),k[2]=s.map(()=>""),k[3]=s.map(h=>`pokemon:${h.id}`),k};return(n,s)=>(y(),u("div",null,[s[0]||(s[0]=B("",11)),v(b,{search:r}),s[1]||(s[1]=B("",3)),v(b,{search:P(t.value,{scheme:d})},null,8,["search"]),s[2]||(s[2]=B("",3)),v(b,{search:P(E.value,{voc:!0})},null,8,["search"]),s[3]||(s[3]=B("",1))]))}});export{Cs as __pageData,qs as default};
