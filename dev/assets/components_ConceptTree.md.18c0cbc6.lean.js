import{e as n,D as s,i as a,E as t,m as e,o as p,c as o,q as c,b as l,f as u,F as i,z as r,x as k,r as d,G as m,H as h,B as g,t as w,C as f,a as y}from"./app.dffceb67.js";import{_ as v}from"./ItemList.d6d68bc7.js";import{_ as q}from"./Arrow.11563f68.js";import"./shared.690f4af6.js";import"./ItemName.937692df.js";import"./LoadingIndicator.970ca1e0.js";const b=n({name:"ConceptTree",components:{ItemList:v,Arrow:q},props:{modelValue:{type:Object,default:null},concepts:{type:Array,required:!0},hierarchy:{type:Boolean,default:!0},itemListOptions:{type:Object,default:()=>({})}},emits:["select","open","close","update:modelValue"],setup(n,{emit:e}){const p=s({}),o=n=>{p[n.uri]=!0,e("open",n)},c=n=>{delete p[n.uri],e("close",n)},l=s=>{let a=[],t=s.concept,e=s.depth+1;if(t&&p[t.uri])for(let p of t.narrower||[]){let s={concept:p,depth:e,isSelected:h.exports.compare(n.modelValue,p)};a.push(s),a=a.concat(l(s))}return a};return{items:a((()=>{let s=[];for(let a of n.concepts){let t={concept:a,depth:0,isSelected:h.exports.compare(n.modelValue,a)};s.push(t),n.hierarchy&&(s=s.concat(l(t)))}return s})),isOpen:p,open:o,close:c,toggle:n=>{p[n.uri]?c(n):o(n)},jskos:t}},methods:{scrollToUri(n){this.$refs.itemList.scrollToUri(n)}}}),S={key:1,class:"jskos-vue-conceptTree-selectedOverlay"};b.render=function(n,s,a,t,h,g){const w=e("arrow"),f=e("item-list");return p(),o(i,null,[c(" ConceptTree is basically an extension of ItemList "),l(f,m({ref:"itemList"},n.itemListOptions,{class:{"jskos-vue-conceptTree":!0,"jskos-vue-conceptTree-noHierarchy":!n.hierarchy},items:n.items,"item-property":"concept",onSelect:s[1]||(s[1]=s=>{n.$emit("select",s),n.$emit("update:modelValue",s.item)})}),{beforeItem:u((({item:s})=>[c(" Use divs for depth spacers so we can have visual lines for the hierarchy "),(p(!0),o(i,null,r(s.depth,(n=>(p(),o("div",{key:n,class:"jskos-vue-conceptTree-depthSpacer"})))),128)),c(" Show arrow for concepts with narrower concepts "),n.hierarchy?(p(),o("div",{key:0,class:"jskos-vue-conceptTree-arrow",onClick:k((a=>n.toggle(s.concept)),["stop"])},[s.concept&&s.concept.narrower&&0!==s.concept.narrower.length?(p(),o(w,{key:0,direction:n.isOpen[s.concept.uri]?"down":"right",clickable:!0},null,8,["direction"])):c("v-if",!0)],8,["onClick"])):c("v-if",!0),c(" Highlight background for row if selected "),c(" Note: We're using a separate div here because we can't add a CSS class to an individual ItemList row "),s.isSelected?(p(),o("div",S)):c("v-if",!0),c(" Slot for additional content before item "),d(n.$slots,"beforeItem",{item:s.concept})])),afterItem:u((({item:s})=>[c(" Slot for additional content after item "),d(n.$slots,"afterItem",{item:s.concept})])),_:1},16,["class","items"])],2112)};const C=y('',13),_={key:1},T=y('',1),x='{"title":"ConceptTree","description":"","frontmatter":{},"headers":[{"level":2,"title":"Props","slug":"props"},{"level":2,"title":"Slots","slug":"slots"},{"level":2,"title":"Methods","slug":"methods"},{"level":2,"title":"Events","slug":"events"},{"level":2,"title":"CSS Variables","slug":"css-variables"},{"level":2,"title":"Examples","slug":"examples"}],"relativePath":"components/ConceptTree.md","lastUpdated":1624964454600}',j={};const I=Object.assign(j,{expose:[],setup:function(n){const a=g.exports.initializeRegistry({provider:"ConceptApi",api:"https://coli-conc.gbv.de/api/"}),t=s({scheme:null,async loadScheme(){this.scheme=(await a.getSchemes({params:{uri:"https://www.ixtheo.de/classification/"}}))[0]},concepts:null,async loadConcepts(){this.concepts=h.exports.sortConcepts(await this.scheme._getTop())},async loadNarrower(n){n.narrower&&!n.narrower.includes(null)||(n.narrower=h.exports.sortConcepts(await n._getNarrower()))},selected:null});(async()=>{await t.loadScheme(),await t.loadConcepts()})();const e=(...n)=>window.alert(...n);return(n,s)=>(p(),o("div",null,[C,l("p",null," Selected: "+w(f(t).selected&&f(t).selected.uri||"none"),1),f(t).concepts?(p(),o(b,{key:0,modelValue:f(t).selected,"onUpdate:modelValue":s[1]||(s[1]=n=>f(t).selected=n),style:{height:"400px",overflow:"scroll",border:"2px solid #0001"},concepts:f(t).concepts,onOpen:s[2]||(s[2]=n=>f(t).loadNarrower(n))},{beforeItem:u((({item:n})=>[l("span",{class:"opacity-hover",style:{"margin-right":"5px"},onClick:k((s=>e(`Clicked on Star for item ${n.uri}`)),["stop"])}," ⭐️ ",8,["onClick"])])),afterItem:u((({item:n})=>[l("div",{class:"opacity-hover",style:{position:"absolute",width:"20px",right:"2px",top:"50%",transform:"translateY(-50%)"},onClick:k((s=>e(`Clicked on Rocket for item ${n.uri}`)),["stop"])}," 🚀 ",8,["onClick"])])),_:1},8,["modelValue","concepts"])):(p(),o("div",_," Loading concepts... ")),T]))}});export default I;export{x as __pageData};
