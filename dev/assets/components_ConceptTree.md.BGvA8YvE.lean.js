import{_ as q,d as b,o as e,b as y,w as o,c as r,E as _,F as S,e as c,$ as F,r as m,M as T,a2 as D,h as I,D as B,y as V,j as g,t as j,a1 as w}from"./chunks/framework.DOrQYd6A.js";import{j as $,c as A,s as f}from"./chunks/jskos-tools.CpjLtWvA.js";import{I as x}from"./chunks/ItemList.6VWNzW3a.js";import{A as P}from"./chunks/Arrow.BM61LVN8.js";import"./chunks/shared.l0sNRNKZ.js";import{c as L}from"./chunks/index.C1QD6wya.js";import"./chunks/ItemName.BXFfuZjO.js";import"./chunks/utils.Cs71LNG2.js";import"./chunks/LoadingIndicator.BIFdSjTT.js";import"./chunks/vue-scrollto.FOkUA__D.js";const O=b({name:"ConceptTree",components:{ItemList:x,Arrow:P},props:{modelValue:{type:Object,default:null},concepts:{type:Array,required:!0},hierarchy:{type:Boolean,default:!0},itemListOptions:{type:Object,default:()=>({})}},emits:["select","open","close","update:modelValue"],setup(i,{emit:h}){const a=D({}),p=s=>{a[s.uri]=!0,h("open",s)},n=s=>{delete a[s.uri],h("close",s)},k=s=>{a[s.uri]?n(s):p(s)},t=s=>{let l=[],E=s.concept,v=s.depth+1;if(E&&a[E.uri])for(let u of E.narrower||[]){let C={concept:u,depth:v,isSelected:A(i.modelValue,u)};l.push(C),l=l.concat(t(C))}return l};return{items:I(()=>{let s=[];for(let l of i.concepts){let E={concept:l,depth:0,isSelected:A(i.modelValue,l)};s.push(E),i.hierarchy&&(s=s.concat(t(E)))}return s}),isOpen:a,open:p,close:n,toggle:k,jskos:$}},methods:{isUriInView(...i){return this.$refs.itemList.isUriInView(...i)},scrollToUri(...i){this.$refs.itemList.scrollToUri(...i)}}}),N=["onClick"],U={key:1,class:"jskos-vue-conceptTree-selectedOverlay"};function M(i,h,a,p,n,k){const t=B("arrow"),d=B("item-list");return e(),y(d,T({ref:"itemList"},i.itemListOptions,{class:{"jskos-vue-conceptTree":!0,"jskos-vue-conceptTree-noHierarchy":!i.hierarchy},items:i.items,"item-property":"concept",onSelect:h[0]||(h[0]=s=>{i.$emit("select",s),i.$emit("update:modelValue",s.item)})}),{beforeItem:o(({item:s})=>[(e(!0),r(S,null,_(s.depth,l=>(e(),r("div",{key:l,class:"jskos-vue-conceptTree-depthSpacer"}))),128)),i.hierarchy?(e(),r("div",{key:0,class:"jskos-vue-conceptTree-arrow",onClick:F(l=>i.toggle(s.concept),["stop"])},[s.concept&&s.concept.narrower&&s.concept.narrower.length!==0?(e(),y(t,{key:0,direction:i.isOpen[s.concept.uri]?"down":"right",clickable:!0},null,8,["direction"])):c("",!0)],8,N)):c("",!0),s.isSelected?(e(),r("div",U)):c("",!0),m(i.$slots,"beforeItem",{item:s.concept})]),afterItem:o(({item:s})=>[m(i.$slots,"afterItem",{item:s.concept})]),_:3},16,["class","items"])}const R=q(O,[["render",M]]),J=w("",13),K=["onClick"],z=["onClick"],Y={key:1},H=w("",1),es=JSON.parse('{"title":"ConceptTree","description":"","frontmatter":{},"headers":[],"relativePath":"components/ConceptTree.md","filePath":"components/ConceptTree.md"}'),W={name:"components/ConceptTree.md"},hs=Object.assign(W,{setup(i){let h;const a=D({scheme:null,async loadScheme(){this.scheme=(await h.getSchemes({params:{uri:"https://www.ixtheo.de/classification/"}}))[0]},concepts:null,async loadConcepts(){this.concepts=f(await this.scheme._getTop())},async loadNarrower(n){n.narrower&&!n.narrower.includes(null)||(n.narrower=f(await n._getNarrower()))},selected:null});V(async()=>{h=L.initializeRegistry({provider:"ConceptApi",api:"https://coli-conc.gbv.de/api/"}),await a.loadScheme(),await a.loadConcepts()});const p=(...n)=>window.alert(...n);return(n,k)=>(e(),r("div",null,[J,g("p",null," Selected: "+j(a.selected&&a.selected.uri||"none"),1),a.concepts?(e(),y(R,{key:0,modelValue:a.selected,"onUpdate:modelValue":k[0]||(k[0]=t=>a.selected=t),style:{height:"400px",overflow:"auto",border:"2px solid #0001"},concepts:a.concepts,onOpen:k[1]||(k[1]=t=>a.loadNarrower(t))},{beforeItem:o(({item:t})=>[g("span",{class:"opacity-hover",style:{"margin-right":"5px"},onClick:F(d=>p(`Clicked on Star for item ${t.uri}`),["stop"])}," â­ï¸ ",8,K)]),afterItem:o(({item:t})=>[g("div",{class:"opacity-hover",style:{position:"absolute",width:"20px",right:"2px",top:"50%",transform:"translateY(-50%)"},onClick:F(d=>p(`Clicked on Rocket for item ${t.uri}`),["stop"])}," ðŸš€ ",8,z)]),_:1},8,["modelValue","concepts"])):(e(),r("div",Y," Loading concepts... ")),H]))}});export{es as __pageData,hs as default};
