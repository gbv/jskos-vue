import{_ as T,C as D,o as p,b as B,w as d,r as u,c as g,F as I,B as V,Z as f,e as v,K as L,d as $,af as _,h as j,v as P,ae as b,j as m,t as x}from"./chunks/framework.D_-sV8XS.js";import{j as O}from"./chunks/index.C4YE1UjW.js";import{I as N}from"./chunks/ItemList.DcA8dwKw.js";import{A as U}from"./chunks/Arrow.b3ScokBg.js";/* empty css                      */import{c as C,s as q}from"./chunks/utils.C1NTnpRP.js";import{c as M}from"./chunks/index.CrdVoakO.js";import"./chunks/ItemName.CtpF2BMa.js";import"./chunks/LoadingIndicator.BPMJwAqh.js";import"./chunks/vue-scrollto.DDOJiwre.js";const R=$({name:"ConceptTree",components:{ItemList:N,Arrow:U},props:{modelValue:{type:Object,default:null},concepts:{type:Array,required:!0},hierarchy:{type:Boolean,default:!0},itemListOptions:{type:Object,default:()=>({})}},emits:["select","open","close","update:modelValue"],setup(i,{emit:k}){const t=_({}),r=a=>{let s=[],h=a.concept,F=a.depth+1;if(h&&t[h.uri])for(let o of h.narrower||[]){let c={concept:o,depth:F,isSelected:C(i.modelValue,o)};s.push(c),s=s.concat(r(c))}return s},e=j(()=>{let a=[];for(let s of i.concepts){let h={concept:s,depth:0,isSelected:C(i.modelValue,s)};a.push(h),i.hierarchy&&(a=a.concat(r(h)))}return a}),n=a=>{t[a.uri]=!0,k("open",a)},l=a=>{var F,o,c,A,w;let s=(F=i.modelValue)==null?void 0:F.uri,h=s;for(;s;){const E=(o=e.value.find(S=>C(S.concept,{uri:s})))==null?void 0:o.concept;if(s!==h&&C(E,a))return;s=(w=((c=E==null?void 0:E.ancestors)==null?void 0:c[0])||((A=E==null?void 0:E.broader)==null?void 0:A[0]))==null?void 0:w.uri}delete t[a.uri],k("close",a)};return{items:e,isOpen:t,open:n,close:l,toggle:a=>{t[a.uri]?l(a):n(a)},jskos:O}},methods:{isUriInView(...i){return this.$refs.itemList.isUriInView(...i)},scrollToUri(...i){this.$refs.itemList.scrollToUri(...i)}}}),J=["onClick"];function K(i,k,t,r,e,n){var a;const l=D("arrow"),y=D("item-list");return p(),B(y,L({ref:"itemList"},i.itemListOptions,{class:{"jskos-vue-conceptTree":!0,"jskos-vue-conceptTree-noHierarchy":!i.hierarchy},items:i.items,"item-property":"concept","highlight-by-uri":(a=i.modelValue)!=null&&a.uri?{[i.modelValue.uri]:!0}:{},onSelect:k[0]||(k[0]=s=>{i.$emit("select",s),i.$emit("update:modelValue",s.item)})}),{beforeItem:d(({item:s})=>[(p(!0),g(I,null,V(s.depth,h=>(p(),g("div",{key:h,class:"jskos-vue-conceptTree-depthSpacer"}))),128)),i.hierarchy?(p(),g("div",{key:0,class:"jskos-vue-conceptTree-arrow",onClick:f(h=>i.toggle(s.concept),["stop"])},[s.concept&&s.concept.narrower&&s.concept.narrower.length!==0?(p(),B(l,{key:0,direction:i.isOpen[s.concept.uri]?"down":"right",clickable:!0},null,8,["direction"])):v("",!0)],8,J)):v("",!0),u(i.$slots,"beforeItem",{item:s.concept})]),afterItem:d(({item:s})=>[u(i.$slots,"afterItem",{item:s.concept})]),beforeList:d(()=>[u(i.$slots,"beforeList")]),afterList:d(()=>[u(i.$slots,"afterList")]),_:3},16,["class","items","highlight-by-uri"])}const z=T(R,[["render",K]]),Y=["onClick"],H=["onClick"],W={key:1},hs=JSON.parse('{"title":"ConceptTree","description":"","frontmatter":{},"headers":[],"relativePath":"components/ConceptTree.md","filePath":"components/ConceptTree.md"}'),Z={name:"components/ConceptTree.md"},ks=Object.assign(Z,{setup(i){let k;const t=_({scheme:null,async loadScheme(){this.scheme=(await k.getSchemes({params:{uri:"https://www.ixtheo.de/classification/"}}))[0]},concepts:null,async loadConcepts(){this.concepts=q(await this.scheme._getTop())},async loadNarrower(e){e.narrower&&!e.narrower.includes(null)||(e.narrower=q(await e._getNarrower()))},selected:null});P(async()=>{k=M.initializeRegistry({provider:"ConceptApi",api:"https://coli-conc.gbv.de/api/"}),await t.loadScheme(),await t.loadConcepts()});const r=(...e)=>window.alert(...e);return(e,n)=>(p(),g("div",null,[n[2]||(n[2]=b("",13)),m("p",null," Selected: "+x(t.selected&&t.selected.uri||"none"),1),t.concepts?(p(),B(z,{key:0,modelValue:t.selected,"onUpdate:modelValue":n[0]||(n[0]=l=>t.selected=l),style:{height:"400px","overflow-y":"auto",border:"2px solid #0001"},concepts:t.concepts,onOpen:n[1]||(n[1]=l=>t.loadNarrower(l))},{beforeItem:d(({item:l})=>[m("span",{class:"opacity-hover",style:{"margin-right":"5px"},onClick:f(y=>r(`Clicked on Star for item ${l.uri}`),["stop"])}," â­ï¸ ",8,Y)]),afterItem:d(({item:l})=>[m("div",{class:"opacity-hover",style:{position:"absolute",width:"20px",right:"2px",top:"50%",transform:"translateY(-50%)"},onClick:f(y=>r(`Clicked on Rocket for item ${l.uri}`),["stop"])}," ðŸš€ ",8,H)]),_:1},8,["modelValue","concepts"])):(p(),g("div",W," Loading concepts... ")),n[3]||(n[3]=b("",1))]))}});export{hs as __pageData,ks as default};
